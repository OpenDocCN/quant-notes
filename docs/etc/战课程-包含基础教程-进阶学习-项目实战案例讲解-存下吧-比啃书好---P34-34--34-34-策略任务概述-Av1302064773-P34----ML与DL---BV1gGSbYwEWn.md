# 【量化交易教程】全100集（完整版）清华大佬耗时一月讲完的系统python金融分析与量化交易实战课程，包含基础教程，进阶学习，项目实战案例讲解，存下吧，比啃书好 - P34：34. 34.34.策略任务概述(Av1302064773,P34) - ML与DL - BV1gGSbYwEWn

![](img/d9f98f4f37720f2c0d4263120f57ff5f_0.png)

行了，那给大家说一说吧，哎你说提纯这件事啊，我该怎么去做啊，比如说现在我这样，我说我有一个因子啊，说这个PB它就是我的一个呃因子行吧，然后呢我说这个因子当中啊，有一些我不想要的成分谁呀。

那比如说现在我发现了这个市净率啊，跟这个市值啊，它关系挺大的，然后呢在市净率当中啊，包括了一些跟市值相关的东西，那我既然要提纯，那是不是说现在哎我说这是我的一个因子啊，表示我的一个市净率。

然后呢这个它是一个市值是吧，我是不是说想在这里哎，我把蓝色这个东西给它清出去啊，是不是做这样一件事啊，那怎么清啊，你是不是得先知道市值，哎比如说我说因子，我说因子现在是个整体，我们是不是想看一看市值啊。

解释了这个因子当中的哪一部分，我把这一部分找到，然后呢，我做一个减法，做完减法之后，我剩下的是不是。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_2.png)

就是我中心化之后的一个结果啊，那怎么做呢，我是这样想，大家举个例子，哎我说我做一个方程，这个方程当中啊，大家一定注意啊，就是谁等于谁啊，我说我现在做这个因子啊，就好比是我的一个实定律啊，我说这个因子啊。

刚才你不是说了吗，跟谁相关的，跟我这个市值相关，那我说这样吧，我说这个市值啊，我写出来这里我说有一个市值市值跟它相关啊，那是不是得有一定关联程度啊，那给我们感觉好像这样哎，就像是一个Y等于这个WX。

加上一个B的过程吧，好了我说这块是指你再给我乘上一个W，再加上一个B行吧，我说有这样的关系，既然你说市值占因子当中一部分，那我把他俩列出这样一个式子，没问题吧，哎那大家来想啊，那现在我们要干什么。

我是不是要找到因子当中市值占了多少，那说白了我要干一件什么事啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_4.png)

这个东西叫什么，这东西叫什么，它是不是哎就是一个回归方程啊，如果说我能把这个回归方程给他解出来，什么叫解出来，我知道W是什么，知道B是什么，我是不是就能知道了，哎呦这个市值啊。

占我因子当中多大的一个成分了。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_6.png)

哎是不是这样一件事啊，但是我问大家一件事啊，我们之前哎在讲线性回归的时候，在机器学课程当中啊，我经常会讲其我都是先讲线性回归，那我问大家一件事，我说现在啊当你得到了这个W，得到了这个B之后。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_8.png)

你跟市值啊乘就W乘上市值，再加上B之后，你还原回去得到什么，我们一般情况下管这东西叫什么，是不是叫做一个预测值啊，哎当前我说现在我拿绿色框起这个东西。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_10.png)

我说这个东西啊叫做什么叫做一个预测值。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_12.png)

哎这有没有什么问题啊，没问题吧，然后呢。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_14.png)

我说现在我这块是不是还列了一个Y，这个Y是什么，我说这个东西啊它是什么。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_16.png)

它是我的一个真实值吧，是不是我的一个真实值啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_18.png)

那现在大家看哎，你说这块我们列了也是一个等式，但实际当中你真能得到一个等式吗，在线回归当中你真能得到这个等式吗。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_20.png)

不一定吧，我们得到什么是一个近似解吧，实际当中那表示什么意思。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_22.png)

好像说这样一件事啊，哎我做一个回归方程用啊，我的一个Y。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_24.png)

或者说用我的一个标签表示我的因子，用的是值表示我的输入数据，我现在就想看一看。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_26.png)

我市值解释了因子当中多大一部分，我做了这样一个回归方程。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_28.png)

得到了W和B吧，然后呢我说这样W和B哎，我还原回去W乘上市值。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_30.png)

再加上B之后得到这个东西叫预测值吧，那预测值和真实值之间是不是会有一个差异。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_32.png)

哎预测值和真实值之间肯定会存在一个差异吧，我们一般情况下叫做这个误差项。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_34.png)

为什么会出现差异呢，为什么会产生差异啊，我们现在这个预测是什么意思啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_36.png)

我要看哎呦，因子当中多大一部分能被市值所解释。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_38.png)

它们之间的一个差异代表什么，它们之间的差异哎画这个图当中是不是这样。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_40.png)

我说现在啊有这个啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_42.png)

重新画这个图，在在这来画吧，在这画也行，就是在接着来这画得了，换个颜色。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_44.png)

我说这个图啊，它本来是个红色的，然后呢是指解释了其中蓝色这一部分。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_46.png)

那它们的差异代表什么，差异在哪啊，是不是我现在画圈的这一部分。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_48.png)

这一部分代表着我当前的一个差异啊，什么意思啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_50.png)

真实值和预测值之间必然存在一个差异，这个差异就是市值，你解释不了因子的那一部分，可以吧，说白了回归方程当中我们建立了一个联系。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_52.png)

建立联系的意思，我就找到了市值占因子当中多大的一部分。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_54.png)

或者说市值能解释因子当中多大一部分，一旦我做一个减法。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_56.png)

用真实值减去我的一个预测值，我能得到什么。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_58.png)

是不是就是我想干的一件什么事儿啊，就是提纯的这一件事吧。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_60.png)

好了，咱们来总结一下，一会我们该怎么去做啊，第一步好，我们要建立回归方程，建立回归方程的过程当中啊，一定注意哎谁当Y哎，谁当Y是把因子当Y吧，好了注意点，我是把因子当Y了啊，你想剔除谁的影响。

把谁当做一个X吧。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_62.png)

要做这样一件事好了，第一步求解回归方程当中的一个W和B，W和B减完之后啊，我有了一个X，我是不是趁现在我手里有因子实际的值，用因子实际的值哎，比如这个Y减去什么。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_64.png)

你的一个预测值吧，大家不要大家以前如果说对机器学习不熟悉啊，你看我这块写个等号，不是说他俩就是一定相等，我是说这里要建立回归方程来，尽可能去估计W和B啊这样一件事。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_66.png)

所以说啊现在我们给大家解释了一下，咱们该怎么去求，那一会儿呢，中性化的做法对于大家现在也猜到了，第一步建立回归方程，第二步呢用回归方程当中的。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_68.png)

这也就用回归方程得到的结果被谁捡去啊，被你的一个因子实际当中值减去，这相当于在因子当中啊，刨除了哎我一些我的跟其他的呃。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_70.png)

就是你想刨除掉的哪些对你有影响的。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_72.png)

这样咱们做一个减法，得到，剩下的是不是就是因子实际该有的一些信息啦。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_74.png)

我们把这个过程就叫做一个提纯，说的挺复杂呀。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_76.png)

哎呦我天说的是不是挺复杂，但是其实做起来是不是挺简单，哎就是在我印象当中减去啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_78.png)

不能被你当前的一些指啊，比如说比比如说在市盈率当中减去，不能被咱们的一个市值所解释的那一部分。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_80.png)

剩下的就是我要的一个纯的这个意思啊，说的有点绕，大家自己来理解一下。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_82.png)

看一看是不是我们说的回归方程，哎这样一个意思行了。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_84.png)

最后我们要做一个因子的一个策略啊，先给大家说一说呃，咱们这个策略啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_86.png)

然后要怎么去做啊，是这样一件事，我先把这个过程写完，一会儿呢咱们来写这个策略。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_88.png)

我说这样，现在既然我们提到了啊，有两个指标，一个PPPR是吧，我们的市净率还有个市值行了，把他俩指标先拿出来，一会儿你不是要干什么吗。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_90.png)

你不要去玩这个那个什么中中心化是吧，哎咱一会拿这两个值来给大家举个例子啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_92.png)

然后哎对这里我说这个中心化其实忘说一点。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_94.png)

我们现在说的是什么因子要做中性化吧，其实在实际一些量化当中啊，不光因子做这做这个中性化，一些行业是不是也能做中性化啊，其实能做的事蛮多啊。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_96.png)

这些咱先不给大家做延伸啊，大家后续可以自己来去看资料。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_98.png)

能做的东西还蛮多的，咱就先拿因子来来来给大家举个例子，在这个PPPR和事实数据。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_100.png)

我先拿到手一些指标，然后呢在数据当中啊，我要做一个剔除的操作啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_102.png)

比如说现在股票池里边，我要剔除一些我不喜欢的，或者说剔除一些垃圾吧，什么垃圾啊，停牌的呀，s st股啊，还有一些新上市的呀，比如说小于半年啊，半半年之内上市的，我可以先都不管，剔除掉一些我不想要的股票。

然后呢依次对我们数据要做处理，哎按照咱顺序啊去极值啊，标准化中性化，然后我们处理完处理完之后呢，我们要做这样一件事啊，考虑干什么，基于我处理后的结果来去选股了。



![](img/d9f98f4f37720f2c0d4263120f57ff5f_104.png)

比如说现在我说这个市净率啊，我说他现在小于0。2的，我认为是我比较喜欢的，我说我把所有小电R结果哎拿出来，基于这个策略，还有选股是不行啊，说白了就是一个基于因子来去选择，股票池当中啊，哪些我要买。

哪些我要卖啊，这样一件事，这个是一会儿啊咱们要完成的一个任务啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_106.png)

中心化咱在这个策略当中啊，给大家一步步去写吧。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_108.png)

萝卜当中咱不看了啊。

![](img/d9f98f4f37720f2c0d4263120f57ff5f_110.png)