# 【耗时半年】python量化交易，从入门到实战，做好资产管理，年薪百万不是梦，收藏起来慢慢看！ - P12：12 金融量化分析-numpy-array索引和切片 - Python之家 - BV1QWDnYyE7M

好啊，咱们下面来讲nd array啊，他的一些快捷的运算，就是我之前在刚开始的时候，给大家举的两个例子。



![](img/1254610809e04bbe6fc09c41d33c9f70_1.png)

我刚才之前举的演示的例子是什么，大家记得吗，就是美元都转化成成这里，那这个例子是怎么来的，哎讲一下它的原理啊，首先我们可以创建一个啊，我比如说我用a range创建一个快一点的啊。

十好现在A是0~9的这么一个数组。

![](img/1254610809e04bbe6fc09c41d33c9f70_3.png)

那它可以提供哪些快捷的运动，第一它可以和标量进行运算，那什么是标量呢，标量其实就是数，数学上叫标量啊，这个东西数学上叫数组，也可以叫做向量，嗯啊那12345，这就叫标量好，我可以A加一全都加。

一直都再加一，A乘三空，你还可以反过来三除以A。

![](img/1254610809e04bbe6fc09c41d33c9f70_5.png)

啊这什么情况，一会再说啊，这个出现了一点小小情况，这个咱们后面会讲到，先留一个小悬念，好和标量的运算还可以什么呢，还可以和另外一个数组作用算，比如说我再创建一个啊。



![](img/1254610809e04bbe6fc09c41d33c9f70_7.png)

![](img/1254610809e04bbe6fc09c41d33c9f70_8.png)

好B也是一个长度为十的啊，A也是一个长度为十的。

![](img/1254610809e04bbe6fc09c41d33c9f70_10.png)

那两个数组也可以做运算，相当于就是两个对应位置上的做加法，看十加零十一加12+23加，两个二维数组可以加减乘除，两个二维数组也可以，只要它们大小一样啊，不一样就乱了，不一样就乱了，方块好加减乘除。

那还有大于。

![](img/1254610809e04bbe6fc09c41d33c9f70_12.png)

哎大运运算这个返回这点意思，我知道哎我们经常说这个一大于二。

![](img/1254610809e04bbe6fc09c41d33c9f70_14.png)

是不是返回一个false，所以他这个相当于是A对应的每个位置上，ab上每个位置上看A大于b false，你改一个改A其中的一个值。



![](img/1254610809e04bbe6fc09c41d33c9f70_16.png)

![](img/1254610809e04bbe6fc09c41d33c9f70_17.png)

再看A大于B哎，就第一个位置是竖起来的，是为false。

![](img/1254610809e04bbe6fc09c41d33c9f70_19.png)

这是大于啊的情况，那以后我在程写程序的时候呃，就是我我我做一些这种这种类似这样，列表之间的这种啊关系的数据运算，就可以用，这个完全可以用这个库比写自己写循环了。



![](img/1254610809e04bbe6fc09c41d33c9f70_21.png)

对而且他实际上比你写出来的循环要快，对效率还高，效率还高好那第二一个咱们就是老生常谈。

![](img/1254610809e04bbe6fc09c41d33c9f70_23.png)

说一说什么，所以就是瞎标啊，咱们列表上讲列表的时候。

![](img/1254610809e04bbe6fc09c41d33c9f70_25.png)

这个讲过的啊，A是一个列表或者数组啊。

![](img/1254610809e04bbe6fc09c41d33c9f70_27.png)

A0就是它的一号位呀呀对不对，这个咱们都知道了，然后二维数组二维数组的话好，你需要讲二维数组是二维数组的话，索引怎么来，谁先找到行再找列，然后我们来一个二维数组啊，等于NP点a range，哎。

这也给大家补充一点啊，怎么样生成一个快速生成一个二维数五层。

![](img/1254610809e04bbe6fc09c41d33c9f70_29.png)

比如说我a range十五一维的，是不是一个一维的呀，那we are sorry，Reshape，Reshape，为什么叫rec成。



![](img/1254610809e04bbe6fc09c41d33c9f70_31.png)

就把这个一维变成2A看看变成一个receive，变成一个3×5的一个二维嗯，三十五三还记得为什么shift是啥吗，ship不是返回三和五吗，为ship就是给他重新变一下形嗯，re不是重新吗。

shift不是形状，但是如果是一维数组，它的返回的这个shift是一十对吧。

![](img/1254610809e04bbe6fc09c41d33c9f70_33.png)

因为15返回的不是一十，因为数组返回的是15哦，长度为一的，OK你几维的返回的就是几个数，OK然后那receive就是返receipt，就是我我把整个15个数排成一列，然后给他返，让它按顺序变成三行嗯。

好就是这个，那对于一个二维数组，我们索引比如说我要想取零，是不是就是A00，对对对，第一行这个和列表也是一样的，还有一种不一样的写法怎么写，对于二维数据来讲啊，不一样的写法，零逗号零。

这是列表里没有的啊，为什么，也就是说这种就是换一种写法而已嘛，咱们等到后边讲，先埋一个伏笔，等到后边讲pandas as这个库的时候，会说到这个功能，到时候会比你用这个功能更加长啊。

啊那基本上到后面你就只就让告诉你，只能用这个功能，不能用这么写，那我试一下啊，我是一个小白，那我要取这个12行，其实是A212302312是哦对sorry，我说13对啊，零不是A22，对是吧。

所以就是A22啊，啊现在我也鼓励大家用逗号怎么写。

![](img/1254610809e04bbe6fc09c41d33c9f70_35.png)

至于为什么咱们会不会说好啊，这是索引对，然后列表里还有一个是什么来着，这个切片切片好常见的。

![](img/1254610809e04bbe6fc09c41d33c9f70_37.png)

我们先回到一维数组，一维数组切片起点结束一维数组，比如说切0~4嗯，切出来的是几，是不是01233后包，包括前包后包包一零对，顾头不顾尾对好，这和列表里一样，包括啊我可以有一个值是空的，对不对好。

那它和列表不一样的地方是什么，不一样的地方就是不知道，我来举个例子啊，我来给个列表，没有不一样的对吧，它没有误查，暂时现在还没有，它没有误差吗，什么补偿有啊，可以有可以有补偿，可以有补偿的什么呢。

好来先来一个啊，我们来看A，看A和B嗯，哎是不是一个是数组，一个是列表，但是它们的值是一样的啊，来看一下啊，嗯来一个C等于A切片，看切0~4，比如说嗯那C然后D等于B的切片，好吧，也是0~4好。

C和DC是A的切片，D是B的切片，要这个时候，比如说我们修改C0的值等于原来是零，对不对，嗯我们修改成20吧，D0的值也修改成20，我问你A的值和B的值是多少，Make it ten。

哎你说说A和B都是长度是从0~9，但是一个是数组，一个是列表，C是A的一部分切片，D是B的一部分切片啊，就是C切的这一部，你现在D0，然后我对C和D的某一个执行的修改，我们来看A和B，B是谁B是谁啊。

A和B是两个一个数组，一个列表，OKOKOK然后D是等于个B0杠四，然后呢你现在修改了D的，修改了D的二等于20，然后然后修改D到20，那相当于他没有变，然后A是在原数组上修改吧，对呀对呀。

为什么会出现这种情况，这不是因为是哦切片了之后，我知道切片就是说相当于你把AA在哪呢，切片那个这儿呢这儿呢啊C对吧，你把C切片了之后，相当于你其实并没有copy1份新数据，而是你只是相当于引用了那一段。

这就是实际上就是对于array这个数组结构来说，在切片的时候实际上也是一种浅拷贝呀，他是做了一个相当于是视图，那为什么要这么干，省空间啊，省空间对，就是实际上我们做用number py。

或者用pandas来做的时候，它都是一个可能是特别大的数据，可能你整个一个列表就占好几百兆，那你切出来一部分，如果你要复制的话，第一时间操作会非常大啊，空间也会占很多内存。

那所以一般来说就是默认的情况下，不会重新开一块电线，它只是相当于做了一个前方位，那就是指向这块位置，所以对C上进行修改，同样会修改到B那如果有人说我不想这么改，那我那我怎么办，我就想让他重新复制一个。

我想再重新复制一个嗯啊我们有一个copy函数，好这个时候C和A就不一样了，嗯啊你再对C进行修改，来看一下，再C看零，我把它零改的改回来啊，你先看一下C和A大都是20，我把C的零给它改回来，改成零。

那我们再看A嗯是不变的啊，用了copy之后，他才是一个参考位，好这是我们讲的，它和之前列表的切片所不样啊，这是一维数组，我们接下来再说回二维数组，列表是浅拷贝，然后呢列表是深拷贝，没有列表。

只是第一层数据值请高我们就先讲一位数，OKOK行，先先讲一维数组啊啊那这个二维数据来说啊，深拷贝浅拷贝的问题还是不还是一样的，我不说了，就是它还是这个叫啊，这个视图是一个浅拷贝啊。

如果用深拷贝要加点copy，那我们说二维数组的切片23点有点意思，那先来mean，来mean，让用用常人的这个方法来想想应该怎么接，假如说我想让你切出来什么呢，切出来0156这四个值0156。

就是我切两列，切两行，用列懂了，先是先把前两行切出来，再在前两行后面再跟一个中括号，然后呢去切那个什么，相当是对两个中括号，第一个是就是A嘛，A中括号，然后0~0到一一，然后二啊。

然后后面再一个中号0~2，行不会为什么呢，来解释一下你的这个方法，为啥A0到二返回的是不是还是一个二维列表，对啊，但是我就把这个写，那你接下来再中括号，一个0。2。

是不是相当于在这个列表基础上再加零的二，那是按行期还是按列期呢，我希望他是按列切，但是它默认的应该是暗行切啊，但你这个东西是按行起来了，没道理，你再它后边再加一个0~20I，因为它单独设计的对吧。

它相当于是什么，它相当于是这么写啊，A0到202，它就是B等于A嗯，0~2嗯，然后C等于B的0~2，最后是这个C那紧跟着两次都是暗行切啊哈，那怎么说哎，我就想01567来怎么切呢，刚才记得那个逗号吗。

哦我说获取值的时候是不是零零可以获取逗号，那切片口号也是0~2，逗号0~2，这个时候就解释成逗号，前面是行，后边是列哦，这么牛逼，所以你可以在里边任意的切，非常好，你可以在里边任意的起来就够了。

比如说我想切这个七八十二十三嗯，那怎么切呢，我知道七八十二十三是吧，那就是A哎，0122~342到四，然后逗号七八十七八十二十三就是一到嗯，可以不写后边，反正切到最后嘛，对吧嗯，Good，哎不对。

5577呀啊对哎，要切七八十二十378十二十三，不对呀，你七八，你数89万，误导我，逗号左边是行，右边是列，你给安排到了啊，左边是行长切片行切片，你切什么，第二行和第三行对，那就是一呃1~1冒号是吧。

列然后是是是是那个0122到，你看跟之前是不是写反对对对不对，Ok good，好，记住啊，逗号左边是行。



![](img/1254610809e04bbe6fc09c41d33c9f70_39.png)

右边是列，好好，这是切片，嗯嗯啊包括多位数字的切片，现在有点印象，这个逗号怎么用了吧，知道好。

![](img/1254610809e04bbe6fc09c41d33c9f70_41.png)

那接下来你先把那个小结讲完了吧，那个就算完了是吧。

![](img/1254610809e04bbe6fc09c41d33c9f70_43.png)