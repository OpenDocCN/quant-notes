# 爽过追剧！！2024最新Python金融分析与量化交易实战教程！三小时入门到进阶！就怕你不学！（ - P11：11 金融量化分析-numpy-array布尔型索引 - Python之家 - BV19LBKY6Ehz

好，那讲完了常规的索引和切片之后，嗯，我们来讲N又又开始给新功能了啊，嗯，叫布尔型索引啥意思呢？首先给一个例子啊，给一个数组，你选出数组中所有大于5的数。嗯，我用filter那个方法，哎常规的。

大家可能学的pythion技术选的好的人，可能上来就反映了filter，那你看来靠，你夸你哎我好开心啊，还是啊先创建一个随机的数组吧嗯。



![](img/a851f601954d78a28c4dca82d4ca2a95_1.png)

![](img/a851f601954d78a28c4dca82d4ca2a95_2.png)

信用列表。我们先用列表啊。

![](img/a851f601954d78a28c4dca82d4ca2a95_4.png)

嗯。😊，啊。

![](img/a851f601954d78a28c4dca82d4ca2a95_6.png)

好，我们可以看到A，这里边是有大于5的，有小于5的对不对？嗯嗯，那刚才A也说了，我们可以用filter啊，那filter怎么写呢？还有人记得吗？we lamb。第。X。然后X大于5。早号。



![](img/a851f601954d78a28c4dca82d4ca2a95_8.png)

我说拼错了那AMBDA对。

![](img/a851f601954d78a28c4dca82d4ca2a95_10.png)

可以。帮我把它变成一个内接就行。变成一个列表。

![](img/a851f601954d78a28c4dca82d4ca2a95_12.png)

好费劲啊，写的我手都疼，就选简单呀，简单吗？简单看更简单的啊，我们把A变成。

![](img/a851f601954d78a28c4dca82d4ca2a95_14.png)

![](img/a851f601954d78a28c4dca82d4ca2a95_15.png)

A rate pricing。surprise you是吧？啊，让你终极写法看A还是对个吧。嗯A中括号A大于5。



![](img/a851f601954d78a28c4dca82d4ca2a95_17.png)

我操。好牛逼啊。我决定从今天开始用numberP。但真的好方便，成功带了一个人入坑啊，那我来解释一下这个布尔型索引嗯，它的原理。嗯，首先分两步，第一步是A大于5。这个咱们是不是之前讲过。

这叫数组和标量的运算？

![](img/a851f601954d78a28c4dca82d4ca2a95_19.png)

对的他反馈什么？

![](img/a851f601954d78a28c4dca82d4ca2a95_21.png)

是不是返回A里边嗯啊每一个值跟5比，你看8比5大把返回处，嗯，3比5小返回fse。嗯，那就是这样的，这是第一步，实际上不是新的功能，是我们之前讲的数组跟标量做运算，跟数出运算。那第21个是我们的新功能。

也就是说什么呢？过滤对你的中括号里边填一个列表进去。嗯，这个列表或者数组，这个列表或者数组的长度，这个数组的长度跟你的A一样，然后它是一个布尔新的。它就会把所有处位置上的值返回出来。嗯，啊。

这么说不好说，我举个例子，比如说。

![](img/a851f601954d78a28c4dca82d4ca2a95_23.png)

Arange。啊啊，没错题个A认证讲太多，忘了。好，现在长度是4，对不对？嗯，好，我看啊，我这么写啊，我手动的。处。



![](img/a851f601954d78a28c4dca82d4ca2a95_25.png)

看到没有？嗯嗯嗯开始把零和三放回来，就是说处位置上的。都出来了，false那场直接过滤掉了。呃，你这样啊，你是放在A里边又搞传进一个直序。弹那一个列表进去为什来。布尔型索言啊布尔型索言，我刚才说了。

就是你中括号里边传一个数组或者列表进去啊，你那个列表或制数组长度要跟A一样啊，然后它要是一个布尔型的啊，列表它就会把所有处位上的值出来这是它底层的原理但是我们写的时候我们写这个A中号A大于5。

是因为A大于5啊，因为这个没有什么。

![](img/a851f601954d78a28c4dca82d4ca2a95_27.png)

来回上，你看已经是那个对。

![](img/a851f601954d78a28c4dca82d4ca2a95_29.png)

![](img/a851f601954d78a28c4dca82d4ca2a95_30.png)

他就会首先A大于5，把这个列表弄出来，然后把这个列表传进这个中括号里边C会把所有啊道的原理懂了懂了吧，gogo好。



![](img/a851f601954d78a28c4dca82d4ca2a95_32.png)

![](img/a851f601954d78a28c4dca82d4ca2a95_33.png)

![](img/a851f601954d78a28c4dca82d4ca2a95_34.png)

那所以这是我说的它的原理。有两个，第一个是数字和标段的运算，然后一个布尔数组。第二个同样它有的布尔数组传进去，会把触位这样的元素弄出来。OK那我问一个问题。给一个数组选取数组中所有大于5的偶数。

所有大于5的偶数，然后那这里还要再。在那个取模一个2。

![](img/a851f601954d78a28c4dca82d4ca2a95_36.png)

对吧还是这个A怎么写？呃，我想想先是A呃，应该是先是我们当然可以是不是可以分开写。嗯。对个我现啊。

![](img/a851f601954d78a28c4dca82d4ca2a95_38.png)

啊，别B了，我现A中括号什么A大于5，哎，是不是选出来所有A大于5的整？然后接下来我是不是取偶数要整数，那我怎么写，那就是大我不要A了，我应该给个B吧。



![](img/a851f601954d78a28c4dca82d4ca2a95_40.png)

嗯。然后B什么曲膜BB曲膜22等于0。

![](img/a851f601954d78a28c4dca82d4ca2a95_42.png)

ok。OK是不是这是我需要两步，我想一步写成一行，然后就后面直接跟中括号对吧？我想写成一行怎么办？对啊，你不就A后面上面那个我知道你想说这么写。



![](img/a851f601954d78a28c4dca82d4ca2a95_44.png)

不行吗？ICICICI为什么不行呢？就是他以为这两个是不是他以为这两个是赛区，不不不切片啊。我们说布尔型，所以传进来的那个布尔型列表或者数度要跟外边的长度一样，对不对？嗯，好，我们看A模二啊。

我知道长度是不是A的长度等，但是前面这一部分的数组是不是长度已经小了。对对，就他们长度不一致。O对啊，你可以第二个A的那个其实是特别是拿的第一次那个长度，对你可以分步做。那你如果我不想分布，我怎么做呢？



![](img/a851f601954d78a28c4dca82d4ca2a95_46.png)

说一下这个玩意儿。

![](img/a851f601954d78a28c4dca82d4ca2a95_48.png)

And a。啊，咦。chohoose value of more than one is呃这个不不这个ambi。



![](img/a851f601954d78a28c4dca82d4ca2a95_50.png)

模糊的。

![](img/a851f601954d78a28c4dca82d4ca2a95_52.png)

嗯。

![](img/a851f601954d78a28c4dca82d4ca2a95_54.png)

简单了。

![](img/a851f601954d78a28c4dca82d4ca2a95_56.png)

啊，我知道什么情况了我知道什么情况了啊，我犯了一个对，这也是我要跟大家说的一个错误。什么错误呢？先说这个运算符是什么。and and是什么运算法。就是雨运相河是雨吗？那这个案钮上不也是雨吗？

那下是不不一样的地方吗？不一样一样吗？我们认为普通程序员，我们认普通人一样，那你触 and什么po嗯，结果是fse对吧？对，然后你这个错。



![](img/a851f601954d78a28c4dca82d4ca2a95_58.png)

![](img/a851f601954d78a28c4dca82d4ca2a95_59.png)

这样写for它也是forse，嗯，有什么不一样的呢？啊3and5发回啥？处返回返回返回5，才按的4呢，返回4嗯，但是。3这个按的是方面键。反回0A，为啥呢？是的，这个预算符实际上不知道大家还记得不记得。

这个是未用符。哦。我操，是二进之位是吧？对。这个俺这个这个让我们不要管他了啊，你就知道他俩不太一样。OK那我们在这个里边。好，所以你应该写的用按它哎，不应该写的是这个啊，写按了也会报错。

先说刚才为什么会出了一个错嗯。应该这么写。因为他的运算优先级。要要高比较高啊啊，所以你写括号看啊，看是要大于5的。那在这里它其实也是相当于就是一个案子，而不是被隐算是。他对，但是你写按的是会报错的。嗯。

你必须写这个案，但其实也是end子的意思。对，在这也是end子的意思，不是未预算的那为啥不能写这个案呢？不知道太复杂了，因为这是一个运算符，运算符是可以。承载我们可以写一个函数来改变这个运算符的错。

不想学了。啊嗯嗯这个东西啊，如果你们在面向对象讲过的话，可能没有讲啊，这个东西是个运算符，它是可以通过一个调用一个函数，我写两个类，我这个类重载一点，它，我就可以哎它的作用变得不一样。啊，那现在。

我可以写他重写它，但是我不能重写这个。这个是很复杂，总总之不需要了解啊，你要记得用这个要记得加括号，不要用and。好好，那我再出第二个问题。我刚才说的是大于5的偶数，我要问的是。

你要筛选出来大于五的数和偶数，大于5的数和偶数，也就是一个或的关系，大于一个，那不就是那你其实还是要取大于5的数吗，不是你大于五的数也要出来，偶数也要出来，那不还是我老大，那不还是。



![](img/a851f601954d78a28c4dca82d4ca2a95_61.png)

不是，那么还是大于5的偶数吗？到底能不是大于五的数和偶数，这是合对。你比如说和所有的偶数，对，就是或者大于为的数也出来，偶数也出来啊，就是即便它不大于5也行是吧？嗯，好，那你就求吧。

那这个奥嘛语的问题你可以对语的问题你可以分布些，但是奥的问题你不能分布些傲的问题。奥奥，那就是那个奥字，你还记得吗？竖线啊。



![](img/a851f601954d78a28c4dca82d4ca2a95_63.png)

对，那有什么区别？没有，就是这个运算符。啊啊，说一下货的时候对不对，这个数现其实你看它相当于是大于5。并大于5或者是okK他就把这两个都写。对，但是其实是在在那个。哦，我知道了啊。

艾你因为一般我们认为运算它就前面这个成立了，就不管后面。对他这个是相当于这个成立，这个成立就都取出来，就相当于是or的关系。两个过滤条件。对，OK两个过滤条是or的关系。好了，好嗯。



![](img/a851f601954d78a28c4dca82d4ca2a95_65.png)

好，这是我们说的功能强大的布尔之索引啊，用好了的话能给你省很多的事儿。对啊，这个确实能省很多的事。好好，非常好，这是布尔之索引。



![](img/a851f601954d78a28c4dca82d4ca2a95_67.png)

![](img/a851f601954d78a28c4dca82d4ca2a95_68.png)