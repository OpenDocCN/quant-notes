# 清华博士带你学习python金融量化投资分析与股票交易【附项目实战】 - P63：65简易回测框架介绍 - python大师姐 - BV1BYyDYbEmW

好OK同学们，那我们的这个金融量化课程，已经到了最后一个小部分啊，我们之前这个把给大家讲了一些常用的，简单的我们的金融化金融这个策略，那接下来我们带着大家啊，写一个简单的回测框架。

我们之前都是用的别人的对吧，其实网上也有好多，比如说我们的这个啊CONTTAXI，有有好多开源的金融框架，大家也可以下来学习一下，那啊有些比如说我们在金融公司，就是从事一些技术部门的，可能不会说啊。

让你去开发一个回这个金融框架，但是可能会让你这维护啊，或者说加一个什么小功能啊之类的这种东西，扩展一下，对对对，扩扩展一下，所以说啊大家还是要就嗯其实我们学完了，是不是pandas学了。

那学了NPY之后，这些东西其实就是你把它写成代码，写出来就可以对，所以我们就给大家写一个简单的啊，不多就200行，200行代码，然后感受一下，就是哎，怎么样就能够有一些这个基本的功能的，一个框架。

那OK好，那这个诶不好意思，那这个框架需要我们这个完成哪些事情呢。

![](img/a35fb0f4820ba68ba0d4e784815585fa_1.png)

大概我们想一想啊，首先就类似于类比上我们之前学过的呃，用过的这个距宽它的框架有什么，比如说它有一个我们经常用到的参数叫context，这个context里边存到上下文，对，叫上下文。

它实际上存的是什么各种，比如说账户的信息啊，什么日期信息呃，主要其实是账户的信息啊，那这些信息我们就要存起来，比如说我现在他要模拟某一天每一天嘛，我这个知道这一天我的账户里有，那我的就是我的持仓。

我持仓哪几只股票，每只股票仓位多少，就是有多少，有多少股，还值多少钱，什么平均成本等等，这些信息都要算嗯啊，这是我叫做上下文信息保存啊，然后什么呢，我的回测啊。

我们经常用的什么activate history，主要就是什么获取历史的数据，因为我比如说我要做数据线，我要根据历史的数据来算我的这个啊。



![](img/a35fb0f4820ba68ba0d4e784815585fa_3.png)

均这个双均线的值啊，或者说一些其他的，那获取历史数据是一个重要的东西对吧，那有了数据，我们这个用户写完代码之后，另一个重要的部分就是下单函数啊，就是对啊，就是我要买或者卖股票操作的时候。

我的那个order order，Target，Order value，order target value那几个函数来，相当于是给你的账户的信息，我的钱要形成的变化。

我的这个持仓的信息要形成的进行变化好，再一个就是设计好用户接口给用户提供，就是因为框架是我们要写一部分的，还有一部分是代码是用户要写的对吧，就是比如说我们之前那个initialize函数和。

这个还能增加函数，那这些接口要给用户设计好了，留下留着用户就是他去写代码，那除此之外，还有一些就是各个实现这个这些框架里的，这些东西的一些细节，我们也要知道，好那啊简单我们简单看了一下。

说我实现这个回测框架大概需要什么。