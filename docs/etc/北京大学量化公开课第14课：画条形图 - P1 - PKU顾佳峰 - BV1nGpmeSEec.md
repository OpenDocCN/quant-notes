# 北京大学量化公开课第14课：画条形图 - P1 - PKU顾佳峰 - BV1nGpmeSEec

亲爱的同学们，大家好，我是北京大学顾佳峰老师，我们今天继续来讲北京大学量化方法课，那这个呢我们在下个月9月20到22号，我们在北京大学举办量化研修班，总共三天的时间，欢迎同学们来报名。

那大家具体可以去看这个公众号里面，有详细的介绍，那这个这个也是一个非常难得的机会，这已经是开了第六期了，很多人都想来学。



![](img/048a9604a527ce139c5c99f5472f52ba_1.png)

那今天呢我们要讲什么呢，讲第四讲就是怎么用Python做图，Python有非常强大的作图的功能，那我们在对数据进行量化分析的时候，一般我们都要看看他的图的分布，因为这样比较直观。

那今天我们在待会用一个具体的例子，这个就是我们Python的数据，从这个数据中大家可以看到它有七个观察值，然后呢分别列出了不同的这个支出的项目，然后呢四个地区北京天津上海重庆。

每个地方的支出的这个值不太一样，那我们根据这个呢可以画出横的这个条形图，这个根据这个我们可以直观的看到，这个每一项支出在全国各地的呃，总体情况，比如说居住居住这个最多，然后其他服务最少一早也比较少。

其次是食品要医药食品烟药啊，所以我们从这位可以看出，另外我们也可以竖的垂直的条形图，垂直条形时是这样，我们可以看到你地区的，比如说北京天津上海重庆，我们可以看到上海的支出最多，其次是北京，第三是重庆。

第四是第三是天津，第四是重庆，所以呢我们今天就来演示像这样的数据，怎么做水平的条形图跟垂直的条线图。

![](img/048a9604a527ce139c5c99f5472f52ba_3.png)

那这个这个课呢大家关心的话，都可以去看这个微信公众号，大家可以到里面去了解这个课程的情况，大家一定要记住，时间是9月20号至22号，所以报名呢要还是要抓紧啊来学习。

那接下来我们用具体的Python的例子来演示，这个呢我们用的还是import pandas，还有呢import math pro plot lab，这个是呃这个Python专用的这个作图的这个命令。

特别好好用啊，我们把它都import一下，然后呢，读读我在呃这个呃教学的数据，就放在这个路径下面，他读读出来以后呢，我们要看一下，看一下describe也是颠覆一下。



![](img/048a9604a527ce139c5c99f5472f52ba_5.png)

然后呢我们运行一下，比如说运行一下这个运行一下出来。

![](img/048a9604a527ce139c5c99f5472f52ba_7.png)

它就是读出来是这个这个就是我们的数据啊，数据大家可以看到这跟我们PPT是一模一样，总共有八个观察值，八个观察者里面呢其实是八个支出的项目，然后呢这边横过来的其实是四个地区。

所以是四个地区八个支出项目这样一个数据表，那做出来以后，因为看数据有些不太直观。

![](img/048a9604a527ce139c5c99f5472f52ba_9.png)

那我们就要把它做图，做出条形图对吧。

![](img/048a9604a527ce139c5c99f5472f52ba_11.png)

做条形图我们做两个图推啊。

![](img/048a9604a527ce139c5c99f5472f52ba_13.png)

条条形出我们写的是中文，因为这个中文可以看起来更直观一点。

![](img/048a9604a527ce139c5c99f5472f52ba_15.png)

所以我们用了这个三，还这样一个一个一个。

![](img/048a9604a527ce139c5c99f5472f52ba_17.png)

然后呢后面图A的话，我们做出来图A的话，这个前面的就是设定子图和图片的大小嗯。

![](img/048a9604a527ce139c5c99f5472f52ba_19.png)

然后呢后面呢我们就和每一个横的嗯，支出项目啊，这些我们都把它做出支出项目，支出金额，支出金额多少，支出项目多少，像这个呢Y轴是支出项目。



![](img/048a9604a527ce139c5c99f5472f52ba_21.png)

就是这个，然后然后呢X轴是支出金额。

![](img/048a9604a527ce139c5c99f5472f52ba_23.png)

所以这个里面我们都在这里面把它弄弄好，然后plot at北京市各项支出项目。

![](img/048a9604a527ce139c5c99f5472f52ba_25.png)

也就是说他投出来的是这一列的，第一列的北京市的各项支出项目。

![](img/048a9604a527ce139c5c99f5472f52ba_27.png)

然后呢size等于15，就是title。

![](img/048a9604a527ce139c5c99f5472f52ba_29.png)

这个就是这个title嗯，然后后面的设定X轴的范围。

![](img/048a9604a527ce139c5c99f5472f52ba_31.png)

这个X轴的范围给他设定好，就是0~19000。

![](img/048a9604a527ce139c5c99f5472f52ba_33.png)

后面的就是添加北京支出项目，这样出来这个这个图其实就画出来了。

![](img/048a9604a527ce139c5c99f5472f52ba_35.png)

![](img/048a9604a527ce139c5c99f5472f52ba_36.png)

就是这个图啊，这个水平的这个支出项目图。

![](img/048a9604a527ce139c5c99f5472f52ba_38.png)

那我们还可以把各地区垂直的支出项目图，也可以画出来，就是这个图我们怎么画啊，前面的还是SURPAT子图，这个都是个子图的概念，然后呢我们labor一下就是他的下面的叫北京，天津上海重庆。

然后呢各自地出地区的支出总收入总支出啊。

![](img/048a9604a527ce139c5c99f5472f52ba_40.png)

这个它实际上是把支支出的总支出给他算出来。

![](img/048a9604a527ce139c5c99f5472f52ba_42.png)

加总嗯。

![](img/048a9604a527ce139c5c99f5472f52ba_44.png)

然后后面的绘制垂直线，然后宽度长度还有那个居中。

![](img/048a9604a527ce139c5c99f5472f52ba_46.png)

就是这个值居中都在这边后面的x were label，Y label，x label就地区y label就总支出，然后呢title就是这个title啊。



![](img/048a9604a527ce139c5c99f5472f52ba_48.png)

sin x是五，然后后面的Y轴的这个值多区间啊。

![](img/048a9604a527ce139c5c99f5472f52ba_50.png)

下面呢就是给条形图添加具体的标签啊，这个每个标签都放在上面，黑色的啊，这样的在这个呢plus让它紧凑一点。



![](img/048a9604a527ce139c5c99f5472f52ba_52.png)

然后显示这个显示出这两个图来了，所以呢我们可以刨一下啊。

![](img/048a9604a527ce139c5c99f5472f52ba_54.png)

跑一下，就这两个图就做出来了。

![](img/048a9604a527ce139c5c99f5472f52ba_56.png)

所以我们现在呢常最常用的这个水平条形图跟。

![](img/048a9604a527ce139c5c99f5472f52ba_58.png)

垂直条形图就要做出来，就通过这个语句好，今天我们讲到这里。

![](img/048a9604a527ce139c5c99f5472f52ba_60.png)