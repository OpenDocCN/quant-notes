# 【比刷剧还爽！】这太完整了！量化交易和python金融分析实战课程，全程干货无废话 入门到精通一步到位！（数据挖掘分析／大数据／可视化／投资／金融／股票／算法） - P82：86. 24.25.凸问题的等价变换，营养食谱问题，线性分数规划，二次规划，QCQP，回(Av526664194,P24) - AI算法-溜溜 - BV1iC411n7XN

![](img/1afe7bc4a756f16405d9771b24b92fc3_0.png)

上节课呢我们讲了一个这个凸问题的，这样一个概念，所谓凸问题呢从广义上来讲的话，它的定义就是我们的这样，我们在极小化这样一个问题，那么这个问题呢它的目标函数呢是一个凸函数，它的约束呢是一个突击。

这个就是我们讲的这样一个凸问题的这样一个，广义的定义，首先出问题呢就是你解释比较容易的问题，但是呢一般来说呢，我们还愿意考虑一种更容易的问题，就是这样一个问题啊，它的目标函数是一个凸函数啊。

同时呢它的不等式约束呢，不等式约束里面这个函数啊也是凸函数，另外呢这个等式约束呢，我要求是这样一个这样一个法式的约束，我们知道如果占我们的约束，如果我们的这个等式约束和这个不等式约束啊。

满足这两个条件的话，那么我们的这样一个约束的集合，一定是个突击对吧。

![](img/1afe7bc4a756f16405d9771b24b92fc3_2.png)

所以呢这个定义是个狭义上的定义，一般来说这样一个通过你可以这样去描述。

![](img/1afe7bc4a756f16405d9771b24b92fc3_4.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_5.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_6.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_7.png)

其中呢我们这些等式的约束，全部都是仿射的约束，另外呢这样一些函数F0到F1直到FM。

![](img/1afe7bc4a756f16405d9771b24b92fc3_9.png)

他们全部都是这样一些凸的函数好，那么这个就是一个一个比较一般的这样一个，关于凸问题的这样一个定义，那么上节课我们要讲了，稍微提到了一点呢，就是这个这个一些比较特殊的一些特殊问题。



![](img/1afe7bc4a756f16405d9771b24b92fc3_11.png)

好，比如说呢，我们考虑一个比较比较重要的一个问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_13.png)

叫做线性规划的问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_15.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_16.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_17.png)

嗯所谓的线性规划问题啊，就是他的所有的这样一些，不管是不管是它的目标函数还是它的约束，全部都是仿射的，就一定要求全部都是仿射的。



![](img/1afe7bc4a756f16405d9771b24b92fc3_19.png)

那么只要你满足这个性质，那么这个问题呢就称为是一个，就称为是个线性规划。

![](img/1afe7bc4a756f16405d9771b24b92fc3_21.png)

那么我们讲这个线性规划肯定是出问题的，一个特例对吧。

![](img/1afe7bc4a756f16405d9771b24b92fc3_23.png)

那么对于这样一个线性规划的问题的话。

![](img/1afe7bc4a756f16405d9771b24b92fc3_25.png)

我们可以去画一下它的一个几何的表示，我们可以从这个几何这个角度去看一下。

![](img/1afe7bc4a756f16405d9771b24b92fc3_27.png)

这个所谓的线性规划问题，它的解应该具有什么样的性质好。

![](img/1afe7bc4a756f16405d9771b24b92fc3_29.png)

首先我们来看一看呢，它的这个约束呢是一个一个仿射的等式约束。

![](img/1afe7bc4a756f16405d9771b24b92fc3_31.png)

和一个仿射的不等式约束，那么这个集合放在一起，它是一个什么样的集合呢，它有个名字的是个多面体的吧，我们以前讲过多面体这个定义，就是你你是有一些方式的等式，和一些方式的不等式所构成的。

这样一个集合叫做多面体。

![](img/1afe7bc4a756f16405d9771b24b92fc3_33.png)

我们想一般来说一个多面体啊，如果我们考虑一个二维的情况的话。

![](img/1afe7bc4a756f16405d9771b24b92fc3_35.png)

你可以把它写成这样一种形式，可以化成这样一种形式。

![](img/1afe7bc4a756f16405d9771b24b92fc3_37.png)

好在二维的情况下，一个多面体它其实就会退化成一个多边形了吧。

![](img/1afe7bc4a756f16405d9771b24b92fc3_39.png)

对吧，这是个多边形，我可以。

![](img/1afe7bc4a756f16405d9771b24b92fc3_41.png)

我可以用一些这种这种线性的不等式约束，去构造出来这样一个多边形的好，那么这个集合呢就是我们的一个约束的集合，这是我们的约束的集合，那么这个时候我们的目标函数的等高线，可以画成什么样子呢。



![](img/1afe7bc4a756f16405d9771b24b92fc3_43.png)

如果我的这个问题，这个目标函数本身是一个仿射的，这样一个形式的话，那么我的等等高线是个什么样子的呢，它应该是有一些平行线对吧，对不对，也就是说呢我的down的X变化一个单位的话。

我的这样一个目标函数值啊，也就相应的去变化这样一个C，当然这个C呢要我要我要去进行一个，我要求一个这样一个内积吧，所以一般来说，它的这个等高线可以画成这样的形式。



![](img/1afe7bc4a756f16405d9771b24b92fc3_45.png)

假设这个方向就是这个我的函数值增大的，这个方向呃，其中一定要注意一点，就是我的这些平行线一定是要等间距，这一定要是等间距的，这是线性规划必须满满足的一个性质好，那么我们来看看啊这样一个线性规划问题。

它的最优解在哪一点呢，他的自由解在哪一点，这一点吧对吧，就一定是在这样一个交点好，那么这一点呢就是我们的这个自由指的这一点，那么这一点呢它的这个它的这样一个投影，是这样一个切线的方向。

应该是这个方向对吧，这是它的这样一个梯度的方向，这就是我们的德尔塔FX星，好我们来看一下这个方向，这个方向跟我的在这个P里面任选一个Y，我任选一个Y去做一下，这个Y减去X这样一个向量，这样两个向量的。

它的内积是不是一定是一定是非负的对吧，一定是恢复的，这个就是我们上节课所讲的这样一个，最优性的条件吧，如果当你的目标函数是一个可悲的情况底下，它的自由性条件就是这样一个条件。

就必须要使得你对于任意的这样一个Y，Y是属于这样一个约束的集合的，你这个Y减去X星的内积，Y减去X与这个德尔塔FX星，它的内积一定要是非一定要是非负的，这就是我们讲的这样一个最优先的条件好。

那么我们来看一看啊，对于这样一个问题，它的最优解是在一个顶点上，对吧好，那么对于一个一般的一个线性规划问题，它的最优解是不是一定在顶点上，这个不一定吧，对吧好，但是我讲一个另外一个问题。

就是对于一个任意一个一般的线性规划问题，它必然至少有一个解在这样一个顶点上，对不对对吧，没问题吧，好，那么也就是说，就是我相信同学们对这个线性规划，应该是相当熟悉了，熟悉吧。

就至少知道知道应该知道这个概念对吧好，从这个底壳上其实来看是非常明显的，就是任何一个线性规划问题，只要你的这个约束呢是这样一个形状的话，那么不管你的等高线怎么变化，你的等高线的变化也就只有。

无非就是这个方向换一下，而已对吧，所以呢它的这样一个自由点，自由者的点呢一定是在这样一些边界上面，它既然在边界上面，那么它至少有一点，或者他应该是在这样一个顶点上面，这个呢就是线性规划。

一个非常特殊的一个一个性质，对于其他所有的优化问题都没有这么好的性质，所以这也就是为什么，这个我们我们可以开发出一些比较好的算法，比如说像这个单纯形法，它就是按照这个顶点来找这个问题的最优解。

这个就是单纯刑法，它的来历就是这样来的好，但是这里呢我们就不不花太多时间去讲，这个线性规划问题，它的解了，因为这个算法，线性规划问题的算法已经非常非常成熟了，我我丝毫不建议你们去做这个问题。

因为这个问题被做的太多了，有你们有太多太深奥的东西，你们不要去做这个问题，但是呢你们要知道一些最基本的概念，就是这个问题的解是个什么样的形式的好，另外呢我我还会花点时间来讲一下，就是一个线性规划问题。

我可以去给他去做一下变形，变成一些我们想要的形式，比如说呢我可以对这个问题啊，去做一个很小的变形。

![](img/1afe7bc4a756f16405d9771b24b92fc3_47.png)

变成另外一种形式。

![](img/1afe7bc4a756f16405d9771b24b92fc3_49.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_50.png)

好我们这边第一个等价变化呢，就是我引进了这样一个变量S。

![](img/1afe7bc4a756f16405d9771b24b92fc3_52.png)

这个变量我们上节课讲过叫做松弛变量对吧，这是个松弛变量，这个变量呢实际上它没有发生，它它完全没有发挥什么作用，它也无非就是把我们这样一个不等式约束啊，我们之前其实这边有一个不等式约束对吧。

就是这个GX减去X要小于等于零，我有这样一个不等式约束，那么现在呢我我把我令这个GX等于H。

![](img/1afe7bc4a756f16405d9771b24b92fc3_54.png)

是等于负X的，就等于负X的，现在呢我要让这个S大于等于零，那么首先第一个问题就是这个问题，他是不是还是个线性规划问题，还是的吧，是不是对吧，因为这个是一个关于X和S的一个一个，仿射的问题。

所有的函数全部都是关于他们的仿射函数，所以它一定还是一个线性规划问题，但是这时候呢它的自变量多了，之前呢我们只有X这样一个自变量，现在呢我们新增加了S这样一个自变量好，这是第一个，那第二个呢。

就是这个问题是不是跟之前那个问题是等价的，是等价的吧，之前这个问题我找一个最优解，X七一定是这个问题的最优解对吧，当然这个问题的最优解呢，它肯定包括两部分，一部分是X星，一部分是S型对吧。

所以那个问题的最优解一定是这种题最优解，当然这个问题的最优解呢，你也一定是那个问题的最优解，这是毫无疑问的，是非常简单的一个变化好，那么我们把这个变化呢再稍微再变一下，再变得稍微复杂一点。



![](img/1afe7bc4a756f16405d9771b24b92fc3_56.png)

我们知道啊，对于任何一个问题啊，这个X加一个解，它可能是X中间这个元素啊，可能是有正有负的对吧，可能有真的可能有负的，那么现在呢我我来想想，就是能不能把这个X中间。



![](img/1afe7bc4a756f16405d9771b24b92fc3_58.png)

那些正的元素和这些负的元素给分开，比如说呢我的假设我的最后的X是这样的东西。

![](img/1afe7bc4a756f16405d9771b24b92fc3_60.png)

好我能不能设计出来这样一个问题，使得这个问题的最优解是这样的，我分成一个正的一部分，我把X分成一个正的部分，就是把它所有的正数的部分呢，把它弄到一块去，好这是X正对吧，另外呢我再构造一部分叫X负。

那么我就使得呢，首先第一个呢就是X正和X负，全部都是大于等于零的，他们都是非负的，这是第一条，第二条呢就是这个X正减去X负就是等于X，我要达到这样一个要求好，那么我们来看看。

我们能不能来构造出这样一个问题，那么很显然就是我们就首先直接来算好不好，我们就令这个X等于X正减去X负，同时呢我们要求的这个X正大于等于零呢，X负呢也是大于等于零的，好吧。

我们就把这样一个X正和X负给带到这里来，看看他是什么样子的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_62.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_63.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_64.png)

那么如果我把这样一些我的这样一些变化，把它给带到这个第一个式子里面来，我很喜欢就可以得到第二个式子了，没错吧。



![](img/1afe7bc4a756f16405d9771b24b92fc3_66.png)

好那么现在我的问题就是，这两个变化是不是等价，他们是不是一定等价的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_68.png)

是一定等价的吗，好一定是等价的对吧，为什么，因为我这边写了一个等价的好，但是呢我们在分析这个问题的时候，没有这么简单的，不是说你任何一个东西你这样去带一下，他就一定可以得到一个等价的变化的。

你需要去分析一下，那么对于这个问题的分析，它实际上比较简单，我们下面呢还会再讲到另外一个例子，我们会讲到怎么去考虑两个问题是等价的。



![](img/1afe7bc4a756f16405d9771b24b92fc3_70.png)

那么这里呢我先稍微提示一下啊，就是如果你要判断两个问题是不是等价的，比如说这样两个问题是不是等价的，那么你要做你要做这样一件事情，就第一件事情就是对于任何的一个X。



![](img/1afe7bc4a756f16405d9771b24b92fc3_72.png)

对于这个问题啊，你任意的一个可行解X。

![](img/1afe7bc4a756f16405d9771b24b92fc3_74.png)

好，那么你一定可以在这边在这个问题里面，找到一个X和一个X负，使得什么东西呢，使得它它是首先它是可行的，要对这个问题是可行的，其次呢要使得啊一定要使得这个问题。



![](img/1afe7bc4a756f16405d9771b24b92fc3_76.png)

它的函数值要等于它的函数值好，这是第一条，也就是说这边你找个X属于一个可行解。

![](img/1afe7bc4a756f16405d9771b24b92fc3_78.png)

这边呢你一定可以找到一个对应的，从这个S变换得来的这样一个X正和X负。

![](img/1afe7bc4a756f16405d9771b24b92fc3_80.png)

使得它也是可以解，同时要使得它的函数值是一样的，或者说呢或者应该这么讲吧，就是你能够找到一个X型。

![](img/1afe7bc4a756f16405d9771b24b92fc3_82.png)

对于任意一个XC，你这边能够找到一个X正型和一个X负性，使得它们的函数值是一样的好这是第一点，你要从这个方向到这个方向，另外呢还有另外一个方向，就是你对于任何一个对于这个问题。

中间的Z的一个X正和X负是可行的，那么它的函数值呢一定是跟这个问题里面，你找到某一个X1个可行的X，使得它的函数值也是一样的好，要要满足这两个方向的这样一个等价性。



![](img/1afe7bc4a756f16405d9771b24b92fc3_84.png)

这样的话这两个问题才是等价的，这个事情你们自己回去讨论讨论好吧。

![](img/1afe7bc4a756f16405d9771b24b92fc3_86.png)

你们可以自己去算一算，看看他们的这个解是不是到底是一样的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_88.png)

好那么为什么我要做上面这个变化呢，为什么我要把这样一个比较标准的一个问题，首先首先给它增加这样一个变量，增加一个S这样的变量，然后呢我再把这个X分成X正和X负，那么这样的话。

我的这个首先我的这个约束增加了，其次呢我的这样一个自变量的数目也增加了，这好像有点得不偿失对吧，但是这么做啊有个好处，我们来看看这个问题里面，它的等式约束全部都是仿射的吧。

好然后呢它的不等式约束是个什么样子的呢，不等数学书是不是就非常简单了，全部都是非负的约束，这是一种非常简单的约束，所以呢一般而言呢，我们一般呢喜欢喜欢把这样一个线性规划问题。



![](img/1afe7bc4a756f16405d9771b24b92fc3_90.png)

都写成这样的形式。

![](img/1afe7bc4a756f16405d9771b24b92fc3_92.png)

一般我们喜欢把它写成这个形式好，首先呢这个目标函数里面的这个X啊，这里面这个X实际上是包括了，你以前这里面这个X正X负，还有这个S对吧，它是包含了这样所有的三个向量的所构成的，一个更大的这样一个向量。

那么这个C呢也是从上面这个这个C，这个C这里面就变过来的，这个实际上这里面这个C跟这里面这个C，实际上这个意思意思是不一样的，好那么另外后面那个D我们可以不需要了吧。



![](img/1afe7bc4a756f16405d9771b24b92fc3_94.png)

因为D是个常数嘛，我就记要化这样一个D其实没有任何意义的，所以呢我可以把这个D给去掉，另外呢我的这样一些等式约束呢，全部都是仿射的好，此外我还有这样一个非负的不等式约束，这就是我们的一个一般的形式。

所以同学们如果做过一个线性规划问题的话。

![](img/1afe7bc4a756f16405d9771b24b92fc3_96.png)

如果你用这个MATLAB来做过这样一个问题的话，你可以去用一下这个里面的函数。

![](img/1afe7bc4a756f16405d9771b24b92fc3_98.png)

就是线性规划的一个线性规划的这样一个函数，那么你如果用这个函数的话呢，它的这个变量的这个命名规则，其实就是就是这个样子的，就是分成占一些等式的，等式的方式约束和这个非负的不等式约束，就这样一个形式的。



![](img/1afe7bc4a756f16405d9771b24b92fc3_100.png)

当然这都是非常简单的概念了。

![](img/1afe7bc4a756f16405d9771b24b92fc3_102.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_103.png)

好下面我们来举个例子，看一看这个到底在哪些问题里面呢，我们会出现这样一个线性规划的形式。

![](img/1afe7bc4a756f16405d9771b24b92fc3_105.png)

好我们举个例子就是食谱问题，食谱问题是个非常重要的问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_107.png)

尤其是在美国啊，当然我相信我们班上的同学，可能不需要去解决这样的问题对吧，我看同学们的身材都还不错好，那么这是什么问题呢。



![](img/1afe7bc4a756f16405d9771b24b92fc3_109.png)

因为现在的问题是这样的，就是我们的这个很多时候，我们的营养是比较过剩的，吃东西太多了，所以呢我们就要找一种方法，就是能够使得这个，首先呢我们要吃一定量的东西，这个东西呢要使得它能够。

满足这个人的正常的需求。

![](img/1afe7bc4a756f16405d9771b24b92fc3_111.png)

同时呢要使得我们的花费比较小，那基本的描述是这样的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_113.png)

那么我们把把这个问题啊，稍微的详细的描述出来，我们把这个问题的描述先给写出来，然后我们看看怎么从这样一个问题里面，去提取出来一个线性规划的问题。



![](img/1afe7bc4a756f16405d9771b24b92fc3_115.png)

就是我们怎么去formula这样一个问题，这是一个非常重要的一个概念，就是从一个实际问题中间。

![](img/1afe7bc4a756f16405d9771b24b92fc3_117.png)

你怎么去抽象出来一个数学问题啊。

![](img/1afe7bc4a756f16405d9771b24b92fc3_119.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_120.png)

好第一个呢就是我们要选择一个食谱，要使得我们的这个人所需要的一种营养元素啊，比如说这个维生素ABCDEFG对吧。



![](img/1afe7bc4a756f16405d9771b24b92fc3_122.png)

以及等等等等，这些东西要分别不小于B一一直到BM，我们总有M种需要的这些元素，另外呢我们可以选择的有些食物，比如说香蕉和苹果，米饭啊等等，我们假设有N种食物。



![](img/1afe7bc4a756f16405d9771b24b92fc3_124.png)

好假设我们有三种食物，那么单位食物，也就是说比如说这个一公斤食物吧，一公斤的苹果，一公斤的香蕉，假设我们来考虑某个J，这个J呢就表示相交好了好，它包含了这个包含了它有不同的营养对吧。

比如说维生素A还有这么多，就是A1J维生素B是A2减等等等等，也就是说单位食物里面它所包含的营养，我们是用这个就是用这个AIGA来表示的，这个问题的描述很清楚吧，就是首先呢我们有些食物。

其实呢我们食物里面有些营养，那么现在我们要做的事情呢是这样的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_126.png)

每种食物都是有价格的吧对吧。

![](img/1afe7bc4a756f16405d9771b24b92fc3_128.png)

我们要选择一个食物的组合，首先呢我们要使得这个食物的价格要最小。

![](img/1afe7bc4a756f16405d9771b24b92fc3_130.png)

比如说某种食物街，它的价格是CJ，那么现在呢我们要找出一种食谱，它能够使得我们的这个营养能够达到要求，另外呢我们要使得这个总价是最小的，这个就是我们的目标和这样的约束。

好那这个问题应该是个比较简单的问题吧。

![](img/1afe7bc4a756f16405d9771b24b92fc3_132.png)

就基本上你只要学过，只要上过初中对吧，基本上就可以怎么去把这个问题把它描述出来，基本上是可以的，那么我们来看看怎么去做好吧。



![](img/1afe7bc4a756f16405d9771b24b92fc3_134.png)

那么我们在描述这个问题的时候呢，首先我们肯定要找到找到一个东西，就是我们所谓的我们的优化变量，我们的优化变量我们可以去调节什么东西，我们能够调节的实际上只有一样东西，就是每种食物它的量。

我们对于比如说我们来称一斤的香蕉，一斤的苹果。

![](img/1afe7bc4a756f16405d9771b24b92fc3_136.png)

一斤的米饭对吧，就是我们的这个食物的量，我们即为从X一一直到XN级别这个东西，那么我们的目标实际上很简单了，我们的目标就是。



![](img/1afe7bc4a756f16405d9771b24b92fc3_138.png)

要使得这样一个总的价格是最小的，所以总的价值最小呢。

![](img/1afe7bc4a756f16405d9771b24b92fc3_140.png)

它实际上是一个这种线性的组合，这很简单对吧，使得我们的食物的总价是最小的好，那么我们的约束是什么东西呢，首先呢我们要使得这个所谓的营养啊，就是没这种营养，我们这些营养一定要达到我们的下限。

一定要一定要到达我们的下限，那么这个是什么样的呢。

![](img/1afe7bc4a756f16405d9771b24b92fc3_142.png)

也就是对于这种营养，这个I呢是从一到M的这M种一样，我一定要使得我的这个食物里面，所包含的营养的这样一些总额，这些总总数啊是要低于这样一个，是要高于这样一个下限的，这个下限。

就是我们之前讲的这样一个bi这样一些东西好，那么每种食物里面，就是这个所有食物里面，包含的这个这个第I种营养是什么东西呢，其实就是我们的这个AIJ乘以XJ，在相当于X去去叠加起来对吧，非常简单好。

那么我们的问题描述是不是完了，好，同学们都很机灵啊，我们一定要加上另外一个约束，就是使得所有的X啊全部都要大于等于零的，好这个约束一定不能少，在你描述这个问题的时候，一定不能丢掉这个约束。

否则的话就会产生问题，为什么呢，呃我们举个例子啊，吃过一种一种药，叫做珍珠白玉汤是吧，诶这个药是一个完全没有营养的这样一个东西，但是呢它的价格很贵，那么假设我们用某种食物，就是这个珍珠白玉汤好。

如果我没有这样一个约束的话，如果我们没有这样一个约束的话啊，那么我们会怎么去做呢，我们为了让这个价格最小对吧，我们为了让这个价格最小，我们就会去因为去买一个负的，这样一个珍珠白玉汤，对不对好吧。

这样的话因为它的价格很贵对吧，所以呢这样的话，我们就可以使得我的这个总的价格非常非常低，但是呢它丝毫不影响我们的营养对吧，所以一定要注意这样一个非负的约束，这个非负的约束是怎么来的呢。

就是因为在很多实际问题中间都有这样的约束，没有这样的约束的话，你的问题再解就会错了，所以一定要注意这样一个约束，这就是为什么我们之前会讲这一类问题，就我我们为什么会讲这一类标准的问题啊。

就是因为很多的问题呢，实际当中它就会出来这样一个形式，就是我们的这样一个我们的解一定要是非负的，好这个形式呢是一个很标准的一个形式，但是一般来说呢，我们希望把它写成一个向量的形式。

写成一个类似于这样的形式，那这个这个写法实际上很简单的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_144.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_145.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_146.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_147.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_148.png)

好这个呢就是我我把之前这个问题啊，把它给写成一个矩阵的形式，也就是跟这个标准形式是一模一样的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_150.png)

好，那么这种形式呢在很多问题里面都会出现。

![](img/1afe7bc4a756f16405d9771b24b92fc3_152.png)

不光是这个食谱问题，还有我们包括了这样一些调度的问题啊，在很多时候这个物流里面的调度问题，通常呢你都可以写成这样一个线性规划的形式，当然这个物流里面的这个问题稍微复杂一点，这个是这样的。

就是比如说吧我来举个例子。

![](img/1afe7bc4a756f16405d9771b24b92fc3_154.png)

就是我们假设的每种食物，你看比如说这个这个香蕉的话，我们这个就比如说举个例子，这个米饭你可以随便称对吧，你可以称一个是一个100克，101克，102克都是没有问题的，但是香蕉呢你就只能一根一根的称对吧。

所以也就是说你的一些东西呢，中间有些变量必须要是一个整数，必须要是某种整数，所以呢在这个约束里面呢，就会出来一个一个不同的约束，就是所谓叫整数约束，你的X只能等于1234567，只能等于这样一个整数。

那么这个问题呢就是所谓叫整数规划问题，这一类这类问题实际上是非凸的问题吧对吧，如果我们新加一个约束，比如说X1。



![](img/1afe7bc4a756f16405d9771b24b92fc3_156.png)

我们新家站协约数，那么这个这个约束是不是一个非凸的约束啊，对吧，它是一个离散的这个约束嘛，所以呢这个问题就变成了一个非凸的问题，变成一个比较难的问题了啊，所以说也就是说在这个调度问题里面呢。

有的时候这个问题比比，比这个标准的线性规划问题要难。

![](img/1afe7bc4a756f16405d9771b24b92fc3_158.png)

但是我们通常可以通过一些通过一些变换呢，或者通过一些松弛的方法去把这个问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_160.png)

把它变成变成一个标准的线性规划问题，去求得一个次优解。

![](img/1afe7bc4a756f16405d9771b24b92fc3_162.png)

当然这个都是后话了啊。

![](img/1afe7bc4a756f16405d9771b24b92fc3_164.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_165.png)

好下面我们来讨论一个线性规划的一个变种。

![](img/1afe7bc4a756f16405d9771b24b92fc3_167.png)

叫做线性分数规划，那么这个函数其实是这样的，首先呢这个问题我把它称为叫P0。

![](img/1afe7bc4a756f16405d9771b24b92fc3_169.png)

我基于这样一个问题，那么这个问题呢，它的约束是跟我们的线性规划问题，是一模一样的，还有这个方式的不等式和方式的等式约束，但是呢他的目标函数呢不再是一个仿射函数了，它的目标函数叫什么函数呢。

叫做线性分数函数，这函数我们讲过吧，线性分数函数好，一个线性分数函数是这么去定义的，也就是说呢它的分子和分母都是一个仿射函数，这是一个关于X的仿射函数，另外呢我要满足这样一个定义。

就是我的我的这样一个分母啊，我的分母一定要是大于零的，它不能小于零，更不能等于零，这个就是我们的所谓叫线线性分数函数好，如果你的这个目标函数呢是一个线性分数函数，而且呢你的这个约束呢是一个是这样。

一些反射的线反射的这样这样一些集合，是这样一些反射的这个不等式，和反射等式所组成的这样一个东西，那么这个函这样一个规划，就成为一个叫线性分数规划好，那么我的问题来了，就是线性分数规划它是不是一个图规划。



![](img/1afe7bc4a756f16405d9771b24b92fc3_171.png)

是不是一个图规划，是的吗。

![](img/1afe7bc4a756f16405d9771b24b92fc3_173.png)

是的吗，不是吧，我们回顾一下这个函数，它是不是一个凸函数啊，是不是一个凸函数，是的吗，不是吧，是还是不是。



![](img/1afe7bc4a756f16405d9771b24b92fc3_175.png)

你们自己去验证一下，你们自己去验证一下这个这个函数，它不是一个它不是一个凸函数，它是个拟凸函数，我们我们上一章讲过，这个函数是一个拟凸函数对吧，它所有的这个阿尔法萨布拉维set全部都是突击。

但是它本身呢是不并不是一个凸函数，你是可以找到一些特例，比如说你自己可以去找一些这个，找出来这样一些这个这个这个S啊，这个这个CDEF列东西，能够使得它变成一个变成一个非凸的函数，好一定要记住。

这个函数不是一个不是一个凸函数，所以啊这个问题不是一个标准的一个凸问题，它不是一个标准的出问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_177.png)

但是呢一旦别人给了你这个问题，那么你你是可以把它变成一个凸问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_179.png)

这个问题它有个等价的一个形式，就是线性规划的形式，它可以写成一个等价的线性规划的形式，它可以这么去写，它可以写成这样的等价形式，当然有个前提条件，就是你的这样一个原来这个问题啊。

它的定义不能是一个不能是个空集，那么原来这个定义的原来这个函数的定义，原来这个问题的定义域它不是个空集，是什么意思呢，就是首先呢首先呢这个问题他的约束性满足吧，对吧，我要抱抱，这不叫定语，叫可行域。

它的可行域不能是空集，它的可行性不是空间，就表示什么意思呢，表示这个集合并上这个集合。

![](img/1afe7bc4a756f16405d9771b24b92fc3_181.png)

再并上这样一个集合，他应该不是个空集，也就是说我至少有一个可行解在这里，只要只要我有至少一个可行解，那么我一定可以把它等价的去变成这个形式，那么原来这个问题是一个关于X的一个问题，这是个关于X问题。

那么现在呢我的这个新问题里面呢，我把它变成一个关于Y和Z的一个，线性规划问题，我的目标函数是这个这个C和Y的内积，再加上dz，这是个标量，这两个都是标量好，那么我的约束呢变成四个了。

以前那我们只有两个约束对吧，那现在呢我们把它变成四个约束了，首先第一个我有一个不等式约束，就是这个GY减去SHZ是要小于等于零的，这是这是一个这个这个仿制的约束，另外呢我有个AY减去BZ呢是等于零的。

是另外一个，另外我还有个这个这个一和Y的内积，加上F和Z的内积呢，加上F乘以Z呢是等于一的，这又是个标量好，另外还有一个这样一个非负的约束约束，就是Z是要大于等于零的这样一个问题，好我们来看啊。

我们怎么来说明一下这两个问题是等价的呢，原来这个问题是一个关于X的一个问题，下面这个问题呢就是一个关于Y和Z的问题，那么我们要说明这两个问题等价，实际上我们要说明这样这样两点。

第一点呢就是对于任意的一个应该这么讲吧，就是假设这个X它的这个最优解是X1对，原来这个问题最优解是X1，那么我一定可以把这个X型去做个变换，去做个变换好，那么变成一个Y型和Z型，那么这个Y型和Z型呢。

一定是这个问题的最优解，也就是我只要能在这边找到一个最优解，那么我就可以在这边找到一个最优解，这是第一个方面，第一个方面，第二个方面，就是我如果能够找到一个Y型和Z型。

是底下这个问题是P1这个问题它的最优解，那么这我一定可以通过他们来变成一个X型，使得这个X型是P0这样一个问题的最优解，对吧，这个就是一个最最一般的这样一个解决的方法。

但这里呢我们把这个思路啊稍微拓宽一下，我们我们就讲了，就是我们在这个问题里面呢，刚刚我们讲的是一种是一种最最应该怎么讲，是最一般的这样一个这样一个方式吧，就是这就是只要你能说明这两点的话。

那么这两个问题一定是等价的，但是呢你要说明这两点其实并不容易，所以呢我们把这个把这样刚刚这个描述啊，把它讲的更简单一点，也就是说呢我对于任意的一个X，对于原问题里面这个X只要这X是可行的。

只要它是可行的，我一定可以找到Y和Z，找到Y和Z使得它也是对这个新的问题，P1是可行的，同时呢它的函数值是一样的，他们俩的函数值是一样的好这是第一个方向，第二个方向就是对于任意的Y和Z。

是第二个问题的可行解，是第二个问题的可行解，那么我一定可以找到一个X，对于第一个问题是可行的，另外呢他们俩的函数值也是一样的好，那么我如果要说明这两点的话，实际上我是不是就已经说明了前面第一点了，对吧。

我能说明这样，前面这后面这两点，我一定可以说明前面这两点吧对吧，为什么为什么，因为我这边存在一个一一对应的关系吧对吧，我存在这样一个一一对应的关系，所以呢我能说明后面这两点。

那么我一定可以说明前面这两点，那么既然我可以说明前面这两点的话，那么我们就可以说明这两个问题是等价的吧。



![](img/1afe7bc4a756f16405d9771b24b92fc3_183.png)

对吧好，这个有没有疑问，没有疑问吗，你们自己再去思考一下这个，如果你们以后啊，如果你们以后做一些研究方面的工作的话，那么你一定会碰到很多的，类似于这种等价变换的问题的，那么你们脑子一定要清楚。

一定要想清楚，到底应该怎么去说明一下这两个问题是怎样的，你就用我刚刚讲的这个思路来做好，那我先呢把把这样一个证明的思路，把它给说明一下。



![](img/1afe7bc4a756f16405d9771b24b92fc3_185.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_186.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_187.png)

好，首先呢我们来看看我刚刚讲的这个第一个方面。

![](img/1afe7bc4a756f16405d9771b24b92fc3_189.png)

就是如果有个X对于原来这个P0这个问题啊，如果它是可行的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_191.png)

那么我一定可以找到这样一个Y和Z。

![](img/1afe7bc4a756f16405d9771b24b92fc3_193.png)

使得这个Y和Z呢它要在第二个问题里面，在这个P1里面也是可行的，同时呢它的函数值是一样的，那么怎么去找这样的Y和Z呢。



![](img/1afe7bc4a756f16405d9771b24b92fc3_195.png)

不用你们去找了，我自己把这个Y和Z给写出来。

![](img/1afe7bc4a756f16405d9771b24b92fc3_197.png)

就这样的一个Y和Z，我们来看看啊。

![](img/1afe7bc4a756f16405d9771b24b92fc3_199.png)

首先呢如果这个X在这个P0里面是可行的话。

![](img/1afe7bc4a756f16405d9771b24b92fc3_201.png)

如果这个X在P0里面是可行的话，那么这个GX是小于等于H的吧对吧，然后这个ax是等于B的，同时呢我们还有这个，同时我们还有这个ex加上F是大于零的，好我们有这样三个条件，那么我们来看一看。

如果这个X满足这样的条件呢，这样三个条件的话，那么我的Y和Z他会满足什么性质呢，首先呢我来这么这么来看一下啊，就是首先我来验证一下，这个GY减去HZ是什么东西，我们来看看这个JY减去XHZ是什么东西。

它等于这个式子对吧好，那么这个式子它是不是小于等于零的呢，是的吧，为什么，因为这边我已经讲了哦，抱歉这里没有Z对吧好，首先呢我我我们这边已经讲，这个GX减去H1定是小等于零的好。

那么这个分子呢是小于零的，同时呢我的这个分母呢一定是大于零的，所以呢这个式子一定是小于等于零的吧，好这是第一条，那么下面我们来看看第二条是不是满足，那么AX减去B呢是是等于零吧。

所以这个式子也一定等于零的，这没有问题吧，好那我们再来验证一下，他是不是等于一啊，也等于一吧，好另外呢我的Z是不是大于等于零的呢，我的Z1定是大于零的吧对吧，我的Z1定是大于零的。

所以它一定是满足Z大于等于零这样的约束，所以也就是说啊我对于Z的X在，如果他在原来这个问题里面是可行的话，那么我一定可以去弄出来，这样构造出来这样一个X这样一个Y和Z，使得呢他在这个新的问题里面。

在这个P1这个问题里面也是可行的，另外呢，我还可以使得它的这个目标函数值是一样的，我们来看看它的目标函数值是不一样的，因为他这时候他的目标函数值，都应该是等于这个东西吧。

这时候他们的函数值都是应该是一样的，都是等于这样一个式子好，所以也就是说我对于任意的一个X，它在这个PV里面它是可行的，那么我一定可以去构造出一个Y和Z，使得它在这个新的问题里面是可行的。

同时呢这两个问题它的函数值是一样的，那第一个这个方向我已经说明完了吧，好好有没有问题，没有问题可以理解吧，就是这是一种构造的方式，就是我从这个这样一个问题，这样一个可行解X。

我可以去构造出来这样一个新问题的可行解，Y和Z，这是这是一种完全构造的方式。

![](img/1afe7bc4a756f16405d9771b24b92fc3_203.png)

那么其次呢我们要证明第二个方向。

![](img/1afe7bc4a756f16405d9771b24b92fc3_205.png)

就是从这个第二个问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_207.png)

从P1这个问题到P0这个问题，那么假设我们有这个YZ这样一个问题。

![](img/1afe7bc4a756f16405d9771b24b92fc3_209.png)

是这个P这个问题的可行解，但是这时候呢我们要考虑两种情况。

![](img/1afe7bc4a756f16405d9771b24b92fc3_211.png)

第一种情况就是如果这个Z大于零的话。

![](img/1afe7bc4a756f16405d9771b24b92fc3_213.png)

如果这个Z大于零的话，是个什么样子的，如果这个Z大于零的话。

![](img/1afe7bc4a756f16405d9771b24b92fc3_215.png)

我就可以去构造出来一个X，我怎么去构造这个X呢。

![](img/1afe7bc4a756f16405d9771b24b92fc3_217.png)

如果同学们看看到前面，我这么去构造这个Y和Z，我从S来构造Y和Z，你应该想到我怎么去构造这个，我怎么去从这个Y和Z去构造X吧，就是把Y除以Z就行了吧，对不对，这也就是为什么我在这里要假设。



![](img/1afe7bc4a756f16405d9771b24b92fc3_219.png)

Z1定要大于零才行，如果Z不大于零，如果Z是等于零的话，那么我们就没有这么好的一个性质了，那么如果我这么去构造一个X，那么这样一个问这个X。



![](img/1afe7bc4a756f16405d9771b24b92fc3_221.png)

它是不是原来这个问题的可行解，它是不是原来这个问题的可行解呢，肯定是的吧，为什么，因为我们这里其实也已经验证过了吗，我们从这个方向到这个方向验证过了，那么另外一个方向，我们其实也可以很容易的验证呢。

因为这里有这个有这个Z大于零这样的条件，所以实际上这个验证是非常容易的。

![](img/1afe7bc4a756f16405d9771b24b92fc3_223.png)

你们自己可以去看一下。

![](img/1afe7bc4a756f16405d9771b24b92fc3_225.png)

也就是我如果有这样一个Y和Z，我一定可以这么去构造出来。

![](img/1afe7bc4a756f16405d9771b24b92fc3_227.png)

一个构造出来一个X好，那么我们再来看一下这个P1这个问题里面呢。

![](img/1afe7bc4a756f16405d9771b24b92fc3_229.png)

我们的Y和Z呢，这个Z1定是要大于等于零的，所以呢我这里考虑这个Z大于零的情况，那么下面呢我还要去考虑一下，这个Z等于零的情况了。



![](img/1afe7bc4a756f16405d9771b24b92fc3_231.png)

![](img/1afe7bc4a756f16405d9771b24b92fc3_232.png)

如果这个Z等于零的话，那么怎么办呢，我就没法去构造一个X了吧，这么构造就有问题了，所以呢我们要想一种新的方法来构造，这个思路呢，稍微复杂一点。



![](img/1afe7bc4a756f16405d9771b24b92fc3_234.png)

你们不理解有没有关系，但是尽量去理解好吧，主要你要把这样一个总的这个思路搞清楚。

![](img/1afe7bc4a756f16405d9771b24b92fc3_236.png)

就是我怎么去证明这两个问题是等价的。