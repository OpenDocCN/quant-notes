# 完全可自学！人工智能金融领域知识图谱+Python金融分析与量化交易实战全套课程！入门真的超级简单！——机器学习／深度学习／NLP自然语言处理 - P16：7-图中联系人特征 - AI算法-漆漆 - BV1Wgz3YVEx1

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_0.png)

下一面，接下来我们来看就是一个图中的联系特征，联系特征是这样，比如说在这块儿，像我刚才说的，什么时候可能出现一些嗯比较异常的情况呢，就像我刚才说的这个点，它是个中介的情况下。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_2.png)

那怎么样描述这个点是个中介啊，咱之前还没有去体现出来。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_4.png)

在编当中一些额外的在引入的特征吧，这里我们要体现出来的，就是图中的一些联系的特征。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_6.png)

在这个图当中，我们来举个例子，比如说对于这个id2这个点吧，id2这个点他联系了谁啊，联系了id3，还有id8，id3当中哎，他可能对它有一些联系的特征，id8当中它可能也有一些联系的特征吧。

那怎么样用把这些特征描述到id2当中，那是不是看一下哎呀，对三的一些特征，对八的特征，我可以求它们的一个总和，也可以求它们的一个均值吧，然后呢我们来看这个三和八和二之间，它们是不是直接相连的。

对于直接相连这种感觉，我们管它叫做一个一度联系，就是直接的一个感觉。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_8.png)

那我们再来看下一种情况，比如这个id2和这个id6，它是不是先连到这个id3，再连到这个id6啊，那对于这个特征来说，我可以统计什么，他的一个比如说一度联系人，还有一个二度联系人。

一度联系人就是直接能连的，二度联系人就是通过他的id3，间接的菜连到了id6，比如说这个人他借钱不还了，然后他的一个朋友诶，可然后通过他的一个朋友再连着另外一个人，这俩人可能都是借钱不还的。

那可能跟他这个朋友也有这样的一个关系，所以说在这里我们不光考虑一个一度的感觉。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_10.png)

还考虑了一个二度的信息，接下来我们就会对于每一个点来看这个公式吧，对于每个点统计什么统计啊，这个美颜当中有个加权啊，咱不是有number吗，我们把这个number当做一个加权项吧，乘进来就可以了。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_12.png)

对于其中的比如说这个点来说，这个点所有连到的一些边，比如所有连到的一些一度联系人。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_14.png)

一度联系人当中，每一个这一个一度延伸这个连点，它们之间不同的连接是不是有不同的特征啊，算特征的一个均值可以吧。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_16.png)

再算特征的一个总和是不是也可以啊，在这里我们就是分两步啊来去算的，一个是均值，一个是总和，然后呢再分情况进行统计，统计一下。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_18.png)

一度就是直接的再统计一下二度，咱的一个尖节的这样的一个特征啊。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_20.png)

因为我们图当中啊有很多联系的特征，如果说你只关心某一个点，他孤立的一个特征，那看起来有点不太合适，一旦把它们联系特征再考虑进来之后，咱这个结果应该能会更好一些啊，而且我们还分了两部分。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_22.png)

一个叫做一个一度，直接的一个叫做二度，咱就是通过了三，再连到六。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_24.png)

这就是一个二度，再来看一下这里呢，首先我定义了一个比较长的一个函数啊。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_26.png)

这个长函数他又做了这样一件事，其实写的比较长，为了使它能通用一些，所以说做了一些比较沉，就是多余的操作吧，多余操作当中主要就是计算了。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_28.png)

咱们下面两个指标，那接下来我们先来看，下面就是我们对一度联系人，然后做了这样一个事业务联系人当中啊，他有很多个特征可以进行一个展示的，因为我们既然有id，有了编之后，所有特征我们都可以往里去加啊。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_30.png)

这里我就把一个特征全部给加进去了，比如说一些app安装情况。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_32.png)

然后还有一些咱第一个simple，就是咱刚才就做那个做那个用那个count victor。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_34.png)

做那个simple的特征，是不是都可以往里去加，在这里，我们把所有能想到的东西全部都给它加进去，你看这些东西都是我们之前想到的，比如说一些sum值啊，一些mean值或者一些其他的。

就是不同种统一特征组合方案吧，我们把所有结果全部给加进去，包括我们之前做的那个page rank之类的，这些个值啊，咱全加进去，因为这个点连了好多点，他连了十个点，十个点。

它的一个pr得分值我全都知道吧，把这些值我再算一层统计特征，当做它这个点，它一度联系人的结果也可以吧。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_36.png)

还有呢H值，还有一个就是H值，一个A值，还有一个中心度的一个特征，我们是不是全做了，我们这些东西是不是都可以分别统计，它的一个一度。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_38.png)

还有二度不同的结果，你看这里写了一个配置，rank就是这个是统计它的一个一度的。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_40.png)

下面还有统计它二度的一个结果，当我们把所有的特征统计完之后，是不是说这些特征就比较丰富了呀，在这里啊就是给大家举例子。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_42.png)

再看了一下，当前我们最后又做了一步，最为当中我们又做了一个图中联系特征。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_44.png)

其实就是把之前作业特征都拿过来，拿过之后呢。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_46.png)

统计分别统计一下他一度情况和二度情况，分别长什么样子，统计什么呢，就是统计这样一个公式，从这个点出发，就是从这个点连到这么多个点的特征，算一个平均，再算一个总和，当做这个点一度平均的特征，再当做。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_48.png)

比如说下一个点它速度二度了，再当做这个点二度平均的特征，这个就给大家解释了一下，咱图中联系特征啊，它是就是基本的一个做法是长什么样子。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_50.png)

然后这步操作啊，到时候大家执行的时候，不建议大家自己去执行，为什么，因为特别耗时啊。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_52.png)

没有有七八个小时吧，基本上是执行不出来的，因为这一步你想就是来统计它一度二度。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_54.png)

非常耗时的一个操作，所以这步操作大家大概也知道。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_56.png)

咱的一个基本做法就可以了，不需要大家自己来去执行了。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_58.png)

前面咱们跑代码基本没什么太大问题啊，最慢的一些cl结构，估计也就是嗯几分钟甚至十几分钟就完了。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_60.png)

但是你要跑一度和二度，他之间联系特征速度会非常非常慢的。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_62.png)

所以到时候大家就把这个东西啊，当做一个参考就行了。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_64.png)

下面要跑个一天，我估计大家肯定会疯的，因为整个在图模型或者在图算二当中。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_66.png)

这些个统计，这些计算本身它就是非常非常耗时的。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_68.png)

在这里啊就给大家呃一步步解释了一下，对于咱们当前拿到的一份现在数据集，我们都可以提出啊哪一种解决的方案，这解决方案是当年这个啊竞赛当中啊，他的一个冠军代表队啊，提出来的一个优胜解决方案。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_70.png)

在这里啊分给大家阐述了一下，优胜代表队提出来解决方案当中，他们是一步一步怎么去做的，对于不同的一些特征，比如说对于这个边缘特征，哎我们都能提出来哪些信息呢，对于pp特征，对于一些其他特征。

当然其他特征在这里相对来说就比较弱化了。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_72.png)

因为是一个脱敏的，咱只是提出了一些统计而已，它这个核心啊就是咱的一个构建图啊，图当中我们该怎么样计算每一个节点，比如说我那个note to vior顶点，我也做成一个向量。

以及呢构建一个图图当中呢计算prank得分值，计算一个H值，A值，还有一个中心度值，这些都是值得大家在以后相关任务当中啊，比较可以参考的一个结果，还有呢就是他提到了一个联系特征。



![](img/42cbb290b55d9fb3b5f1a95ce71c7881_74.png)

像我刚才给大家解释了一个一度联系人，还有这样一个二度联系人。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_76.png)

分别计算平均还有总和的一个特征，那这个就是给大家啊从头到尾说了一下。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_78.png)

咱当前啊这个融360啊，它的一个相当于我们风控模型当中的特征吧。

![](img/42cbb290b55d9fb3b5f1a95ce71c7881_80.png)

咱们是一步一步啊。