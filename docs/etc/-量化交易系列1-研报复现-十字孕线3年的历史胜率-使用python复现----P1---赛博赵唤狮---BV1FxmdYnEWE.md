# 【量化交易系列1 研报复现】十字孕线3年的历史胜率（使用python复现） - P1 - 赛博赵唤狮 - BV1FxmdYnEWE

![](img/cdec36807cb4a4e003b0fff5b781280e_0.png)

你是否关注过K线，对于各种K线形态和技术指标的有效性。

![](img/cdec36807cb4a4e003b0fff5b781280e_2.png)

你是否曾产生过疑惑，除了亲自投入资金进行实践尝试。

![](img/cdec36807cb4a4e003b0fff5b781280e_4.png)

还有其他方法可以检验它们的有效性吗，实际上确实有这样的方法。

![](img/cdec36807cb4a4e003b0fff5b781280e_6.png)

而且这种方法可能你经常听到，但不一定清楚它的真正含义。

![](img/cdec36807cb4a4e003b0fff5b781280e_8.png)

那就是量化。

![](img/cdec36807cb4a4e003b0fff5b781280e_10.png)

大家好，我是召唤师，我将为大家带来一系列关于量化的专题视频，在这个系列的第一集中，我将从华创证券的K线形态学研究，系列报告入手。



![](img/cdec36807cb4a4e003b0fff5b781280e_12.png)

希望大家能够借助自己熟悉的K线形态，对量化有一个初步的了解，接触定量分析的思维，并最终走上散户专属的量化之路，首先让我们来了解一下，十字线的定义和通常的理解，接下来我将使用量化方法。

对十字运线在过去3年的有效性进行测试，最后我会留下两道思考题供大家探讨。

![](img/cdec36807cb4a4e003b0fff5b781280e_14.png)

这些问题没有标准答案，欢迎大家在评论区分享自己的想法。

![](img/cdec36807cb4a4e003b0fff5b781280e_16.png)

为了帮助那些可能不太了解十字运线的朋友，我简要介绍一下十字运线。

![](img/cdec36807cb4a4e003b0fff5b781280e_18.png)

顾名思义，它的第一根K线较长，能够完全包裹住第二根K线，就像第二根线是由第一根线孕育出来的一样。

![](img/cdec36807cb4a4e003b0fff5b781280e_20.png)

第二根线呈十字形状，因此得名十字运线。

![](img/cdec36807cb4a4e003b0fff5b781280e_22.png)

十字运线分为正面和负面两种形态，通常认为，正面十字运线代表下降行情中的底部反转信号，而负面十字运线则相反。



![](img/cdec36807cb4a4e003b0fff5b781280e_24.png)

但事实是否真的如此呢，我们可以借助计算机。

![](img/cdec36807cb4a4e003b0fff5b781280e_26.png)

使用量化的手段来验证其有效性，首先我们需要对十字运线进行准确的定义。

![](img/cdec36807cb4a4e003b0fff5b781280e_28.png)

大家可以看一看，这是我罗列的量化定义，其实就是将十字运线的条件准确地描述出来，对于昨天是阴线，准确的量化描述是昨开大于昨收，对于第二根十字线，准确描述是金开等于金收，且金高不等于金低。

金线被昨线完全吞没，准确描述是金高小于昨高，且金低大于昨低，负面的描述只有低调和正面的相反，即昨天是阳线，昨开小于昨收，现在我们依据量化描述来编写代码。



![](img/cdec36807cb4a4e003b0fff5b781280e_30.png)

虽然看着很长，但是别害怕。

![](img/cdec36807cb4a4e003b0fff5b781280e_32.png)

其实核心代码只有几行，这四行代码就是对十字运线的准确定义。

![](img/cdec36807cb4a4e003b0fff5b781280e_34.png)

也可以说是筛选条件，你看这里有潘等于cos r high。

![](img/cdec36807cb4a4e003b0fff5b781280e_36.png)

不等于六，和我们刚刚说的对十字运线的定义是一样的。

![](img/cdec36807cb4a4e003b0fff5b781280e_38.png)

你也能轻易地看懂这几行，对第一根是阴线还是阳线进行判断。

![](img/cdec36807cb4a4e003b0fff5b781280e_40.png)

并分别进行赋值，也就是说，如果这个字段是正一则代表正面十字运线。

![](img/cdec36807cb4a4e003b0fff5b781280e_42.png)

一则代表负面十字运线，执行这段代码。

![](img/cdec36807cb4a4e003b0fff5b781280e_44.png)

我们就能得到这两只个股，分别在历史上的这些时间点，出现了正面或负面的十字运线。

![](img/cdec36807cb4a4e003b0fff5b781280e_46.png)

Ok，现在我们已经可以把十字运线形态筛选出来了。

![](img/cdec36807cb4a4e003b0fff5b781280e_48.png)

那么现在就可以引入大量的历史数据，来分析和统计十字运线的历史胜率。

![](img/cdec36807cb4a4e003b0fff5b781280e_50.png)

这里获取了从近3年间所有沪深A股，主板和创业板个股的前复权历史日线数据。

![](img/cdec36807cb4a4e003b0fff5b781280e_52.png)

这段代码跟上面那段其实差不多，主要的核心代码还是通过这四行来筛选，十字运线，此外这里分别取未来5日十日。



![](img/cdec36807cb4a4e003b0fff5b781280e_54.png)

20日，60日的收盘价，这里对未来收盘价和当前收盘价进行对比。

![](img/cdec36807cb4a4e003b0fff5b781280e_56.png)

得到未来的股价变化率运行代码。

![](img/cdec36807cb4a4e003b0fff5b781280e_58.png)

我们可以看到结果，对于正面十字运线历史上一共发生了8000多次，对于负面的十字运线，历史上发生了1万1000多次，右侧可以直接看到不同周期的平均股价变化率，接下来我们来统计一下。



![](img/cdec36807cb4a4e003b0fff5b781280e_60.png)

十字运线在历史上的胜率，我们先定义一下什么是盛。

![](img/cdec36807cb4a4e003b0fff5b781280e_62.png)

对于正面信号来说，未来各个周期的价格大于信号发生时的价格。

![](img/cdec36807cb4a4e003b0fff5b781280e_64.png)

视为剩，负面信号则相反，然后我们运行代码会得到这样的结果。

![](img/cdec36807cb4a4e003b0fff5b781280e_66.png)

这个结果可能不太直观，可以通过图表的方式展现。

![](img/cdec36807cb4a4e003b0fff5b781280e_68.png)

画图的代码暂不赘述了，我们直接看结果，可以看到，对于大多数周期来说，胜率都是非常接近50%的，只有正面信号的60日，胜率明显低于50%，也就是说正面的十字运线，它可能反而是一个有效的看空信号。

而十字运线在其他周期没有明显的区分效应。

![](img/cdec36807cb4a4e003b0fff5b781280e_70.png)

你看是不是和你的固有印象大相径庭呢。

![](img/cdec36807cb4a4e003b0fff5b781280e_72.png)

视频的最后我提出两个思考题可以供大家讨论。

![](img/cdec36807cb4a4e003b0fff5b781280e_74.png)

第一个问题，正面十字运线60胜率非常低，低过了45%，如何能够判断这个结果，是否受大盘下行的行情影响。



![](img/cdec36807cb4a4e003b0fff5b781280e_76.png)

第二个问题，一般来讲，基于形态学上做分析。

![](img/cdec36807cb4a4e003b0fff5b781280e_78.png)

是不可能单独用一个信号的，而是要多个形态，多个指标综合去做判断，那么如何分析十字运线与其他指标。

![](img/cdec36807cb4a4e003b0fff5b781280e_80.png)

综合运用的胜率呢，如果本期视频点赞超过十个，我这新号不贪就要十个赞，在下一期视频，我会谈一下自己对这两个问题的理解。



![](img/cdec36807cb4a4e003b0fff5b781280e_82.png)

我是赛博召唤师。