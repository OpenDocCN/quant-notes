# 强推！这可能是B站最全的【Python金融分析+量化交易】系列课程了，计算机大佬精细讲解从入门到项目实战，看完全程即可就业！ - P15：13 金融量化分析-numpy-array布尔型索引 - 路飞学城Alex小助理 - BV1FsmyYHEGy

好那讲完了常规的索引和切片之后，我们来讲恩迪尔瑞又又开始给新功能了啊，嗯叫布尔型作用啥意思呢，首先给一个例子啊，给一个数组，你选出数组中所有大于五的数。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_1.png)

我用filter那个方法诶，常规的大家可能学的Python基础。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_3.png)

选择好的人可能上来就反映个filter，那你夸他就夸我吧，你在夸你啊，嘿嘿嘿，我好开心啊，还是啊先创建一个随机的数组吧，嗯先用列表，我们先用列表啊，一等一，记错了，原来。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_5.png)

![](img/659a815e9baa6e3fa6ee5061afd1fc47_6.png)

好我们可以看到A这里边是有大于五的，有小于五的，对不对，那刚才大家也说了，我们可以用filter好，那filter怎么写呢，还有人记得吗，Beta lambdon，B x x，然后X大于五逗号A。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_8.png)

我是不是拼错了，m lab a MB d a对开。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_10.png)

然后把它变成一个列表的对象变成一个列表。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_12.png)

好费劲啊，写的我手都疼了，这选出来啊。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_14.png)

简单吗，简单看更简单的啊，我们把A变成array surprising。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_16.png)

surprise you是吧，哎教你终极写法。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_18.png)

看A还是这个吧，A中括号A大于五，卧槽好牛逼啊，我决定从今天开始用number py，哼哼哼，但真的好棒，成功带了一个人入坑啊，那我来解释一下这个布尔型索引，它的原理，首先分两步，第一步是A大于五。

这个咱们是不是之前讲过，这叫数组和标量的运算。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_20.png)

对不对，他返回什么。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_22.png)

是不是返回A里边啊，每一个值跟五比，你看八比五大把返回true，三比五小返回false，那就是这样的，这是第一步，实际上不是新的功能，是我们之前讲的数组跟标量做运算，跟数做运算。

那第二一个是我们的新功能，也就是说什么呢，过滤图对你的中括号里边填一个列表进去嗯，这个列表或者数组这个列表或者数组的长度，这个数组的长度跟你的A1样，然后他是一个布尔型的。

他就会把所有处位置上的值反馈出来，嗯啊这么说不好说，我举个例子，比如说。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_24.png)

arrange啊，没错，a range太多，忘了好，现在长度是四，对不对好，我看啊，我这么写啊，我手动的，True false false true。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_26.png)

看到没有，他是把零和三反过来，就是说处位置上的都出来了，false位置上直接过滤掉呃，呃你这样啊，你先放在A里边，又搞传进一个值去传递一个列表进去，为什么呀，布尔型索盐啊，布尔型通用，我刚才说了。

就是你中括号里边传一个数组或者列表进去，你那个列表或者数组长度要跟A1样，然后他要是一个布尔型的列表，他就会把所有处位置上的值出来，I这是它底层的原理。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_28.png)

但是我们写的时候，我们写这个A中号A大于五，是因为A大于五啊，因为这个没有什么哎，那会上升，你看已经是那个对啧。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_30.png)

![](img/659a815e9baa6e3fa6ee5061afd1fc47_31.png)

他就会首先A大于五。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_33.png)

把这个列表弄出来，然后把这个列表传进这个中括号里边，它就会把所有的都到了。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_35.png)

原理懂了吧，good good好。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_37.png)

那所以这是我说的它的原理，有两个，第一个是数组和变量的运算返回一个布尔数组，第二个同样还有的布尔数组传进去，会把处位上的元素弄出来，OK那我问一个问题，给一个数组选取数组中所有大于五的偶数。

所有大于五的偶数，然后那就得还要再再那个取模一个二是吧。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_39.png)

还是这个A怎么写啊，我想想先是A呃，应该是先是我们当然可以，是不是可以分开写，嗯是的，我现在啊呃别B了。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_41.png)

我先A中括号是什么，A大于五哎，是不是选出来所有A大于五的值，然后接下来我是不是取偶数要整数。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_43.png)

那我怎么写，那就大不要A了，我应该给个B吧，嗯然后B什么取模BB取模二模二等于零。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_45.png)

OKOK是不是这个我需要两步，我想一步写成一行，然后这后面直接跟中括号不就完了吗，我想写成一行怎么办，对啊，你不就A后面上面那个，我知道你想说这么写。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_47.png)

不行吗，CICICS为什么不行呢，就是他以为这两个是不是他以为这两个是赛区，不不不切片了，我们说布尔型索引传进来的那个布尔型列表，或者数组要跟外边的长度一样，对不对。

嗯好我们看A模二的长度是不是A的长度，但是前面这一部分的数组是不是长度已经小了。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_49.png)

所以它们长度不一致，OK对啊，你就是第二个A的那个，其实是特别是拿的第一次那个汤姆，你可以分步做，那你如果我不想分步，我怎么做呢，说一下啊，这个玩意儿and a啊。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_51.png)

咦，The truth value of ureuse，More than one，I is uuh。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_53.png)

这个不不这个AMBI这模糊的。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_55.png)

![](img/659a815e9baa6e3fa6ee5061afd1fc47_56.png)

嗯简单了。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_58.png)

啊我知道什么情况了，我知道什么情况了啊，我犯了一个对，这也是我要跟大家说的一个错误，什么错误呢，先说这个运算符是什么，and and是什么运算符，就是与运算符是雨吗，那这个按着这不也是雨吗。

那下面是不是不一样的地方不一样一样吗，我们认为普通程序员，我们认为呀等你true and什么false。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_60.png)

结果是false对吧对，然后你这个true这样写false哎也是false嗯。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_62.png)

还有什么不一样呢啊，3and5返回啥true返回返回返回五，SAN的四呢返回四啊，但是三这个按的次范围解返回零，哎为啥呢，这个运算符实际上不知道大家还记得不记得，这个是位运算符哦，卧槽是二进制位运算。

对这个啊这个啊这个让我们不要管他了啊，你就知道他俩不太一样，OK那我们在这个里边，好所以你应该写的用按它哎，不应该写的是这个写and的也会报错，先说刚才为什么会出了一个错，应该这么写。

因为它的运算优先级要要高比较高啊，所以你写括号看哦，看是要大于五的，那在这里它其实也是相当于就是一个and的，而不是被运算，是它对，但是你写and是会报错的啊，你必须写这个and。

但其实也是and的意思对，这这也是and的意思，不是不运算的，那为啥不能写这个and呢，不知道太复杂了，因为这是一个运算符，运算符是可以承载的，我们可以写一个函数来改变这个运算符的错，不想学了。

哈哈啊嗯嗯这个东西啊，如果你们在面向对象讲过的话，可能没有讲啊，这个东西是个运算符，它是可以通过一个调用一个函数，我写两个类，我这个类重载一下它，我就可以哎它的作用变得不一样啊，那现在我可以写它。

重写它，但是我不能重写这个啊，这个是很复杂整，总之不需要了解啊，你要记得用这个要记得加括号。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_64.png)

不要用，and好好，那我再出第二个问题，我刚才说的是大于五的偶数，我要问的是你要筛选出来大于五的数和偶数，大于五的数和偶数，也就是一个或的关系大于一个函数，那不就是那你其实还是要取大于五的数吗。

不是你大于五的数也要出来，偶数也要出来，那不还是我老大，那不还是不是，那不还是大于五的偶数吗，到底能不是大于五的数和偶数，这是和多少，你比如说和所有的偶数对，就是大于五的数也出来，偶数也出来啊。

就是即便它不大于五也行，是吧好，那你去求吧，这个or嘛雨的问题，你可以对雨的问题你可以分布些，但是or的问题你不能分布all的问题，or奥，那就是那个帽子你还记得吗。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_66.png)

竖线啊，对啊，那有什么区别没有，就是这个运算符好说一下，或的时候对这个竖线，其实你看它相当于是大于五并大于五，或者是OK它就转这两个都行对，但是其实是在在那个哦，我知道了啊，挨着你。

因为一般我们认为运算它就前面这个成立了，就不管后面对他这个是相当于这个成立，这个成立就都取出来了，这相当于是or的关系，两个过滤条件对OK两个过滤条件二的关系。



![](img/659a815e9baa6e3fa6ee5061afd1fc47_68.png)

好吧好嗯，这是我们说的功能强大的布尔。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_70.png)

之所以啊用好了的话，能给你省很多的事。

![](img/659a815e9baa6e3fa6ee5061afd1fc47_72.png)

对这个确实能省很多的事，好好非常好。