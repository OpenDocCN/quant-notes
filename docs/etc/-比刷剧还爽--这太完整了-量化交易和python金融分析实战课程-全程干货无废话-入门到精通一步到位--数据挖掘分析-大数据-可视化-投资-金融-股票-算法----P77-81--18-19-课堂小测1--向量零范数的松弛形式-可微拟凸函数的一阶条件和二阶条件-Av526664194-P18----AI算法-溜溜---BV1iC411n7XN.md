# 【比刷剧还爽！】这太完整了！量化交易和python金融分析实战课程，全程干货无废话 入门到精通一步到位！（数据挖掘分析／大数据／可视化／投资／金融／股票／算法） - P77：81. 18.19.课堂小测1），向量零范数的松弛形式，可微拟凸函数的一阶条件和二阶条件(Av526664194,P18) - AI算法-溜溜 - BV1iC411n7XN

呃很高兴呢，今天又一次见到了所有的同学啊，啊那个就像我们上节课通知了，我们需我们需要准备一张A4纸，我们来做个小测验好吧，首先说明一下，我们的测验是15分钟时间，非常简单的一个题目，15分钟好。

但是我的要求是这样的，就是你们不能讨论，不能讨论，也不能抄袭好吧，这个你们不要对这个分数特别看重了，这个分数是一个很重要的东西，好看得清楚吧，行那我读一下啊，就是我们要证明这个东西。

就是有一个几何平均函数，这定义是这样的，就是如果我有一个这样一个N维的这个向量X，那么什么叫它的几何平均函数呢，就是我将这个X中间的所有的元素去乘起来，然后呢我再去开个去开个N次方，去开个N次方。

那么这个结果呢，我要证明这个函数它是个凹函数，但是呢这个要求是，我要证明他在这样一个定义上面，嗯这个地域呢是一个是N维的正的时空间，和一个这样一个球的一个交集，和这样一个球的交集，好吧。

这就是我们的题目，15分钟时间，不要忘记把你们的姓名和学号给写上去，好吧，那咱们继续上课好吧，那稍微记一下这个这个题目难不难难不难难呐，呃我上课的时候是不是跟你们讲过，让你们去自己做一下这个题目。

有没有同学做过，我没讲过这句话吗，我讲过这句话，但是你们没有做对吧，好所以啊这个一定要记住，就是我如果讲了什么话的话，那你们最好去做一下，因为我我不会对你们提一些无理的要求的，好吧，呃另外还有一件事情。

就是就是我看到很多同学啊，就是拿了一些别的纸，我我上节课交代的是拿一张A4的纸，这个这个不是什么大的问题，但是这个你最好就按照我的话来做，因为这样的话，我们的这个助教看起来也会方便一点好。

那么这道题呢我稍微来讲一下啊，大部分的大部分的同学啊，就是如果有书或者是有复印的一些资料的话，可能很快就会找到，就会在这个书上找到一个一个类似的一个题目，对吧，这个可以是用这个二级条件来做的。

但是呢很不幸的是，这道题我稍微改了一下，所以啊这个这道题其实不能用外界条件来做的，或者说不能直接用外界条件来做的，为什么呢，回顾一下什么东西叫做二阶条件啊，如果一个函数。

它在它的这个定义里面是处处二阶可导的话，那么我就可以用二阶条件对吧好，但是呢我们看看它的定义是个什么集合呢，它的定义域是有一部分是开的，有一部分是B的，对不对对吧，这前面这个这个正的实数集啊。

它实际上是个开机，但是在这边有部分是个B级，他们交完之后啊，有一部分这个边缘有一部分是开的，有部分是B的，所以也就是说它必然有些点不是二阶可导对吧，所以我们就不能用，不能直接的用二阶条件来做了。

所以呢如果同学们是抄书的话，那么就错了，好咱们继续来讲啊，好上节课呢我们讲了一个非常重要的一个概念，叫叫你凸函数，我们上节课讲了讲了两个定义，讲了关于你图函数的两个定义，第一个定义里面呢。

我们用一个概念叫做阿尔法S，也就是说如果对于这样一个函数，它所有的这些阿尔法sv set，对于所有的阿尔法的话，它都是图集，那么这个函数就是一个女图函数，这是一个这个概念。

实际上是把这个函数和集合这两个东西，把它给结合在一起了，那么第二个定义呢，我们用了一个类似于跟那个凸函数相似的，这样一个定义，第二个定义呢，就是我要求这个它的定义是一定要是个突击，这是一定的。

不管这个函数是凸函数还是你凸函数，它的这个定义域都一定要是个突击，而且呢我对于这个地域里面任意的选择两点，X和Y我再选择一个这样一个theta，在0~1之间，那么我对于这个XY这两点呢去做个凸组合。

然后再求这个函数值，一定是小于等于FX和FY中间最大的一个好，那么这个概念呢，实际上就跟这个凸函数概念有一个不同，就是对于凸函数的话，我们的定义里面是把左边那个地方吗，换成了FX和FY的凸组合的对吧。

那么这里呢我们用的是一个极大的这个函数，就是我在FX和FY中间找到一个最大的一个，这个就是凸函数和你凸函数一个很明显的区别，我们就从这个定义里面就可以看得到好，那么对于你凸函数呢。

你凸函数不一定是凸函数对吧，凸函数一定是你凸的，但是你凸函数不一定是凸函数，但是呢图里图函数啊，即使它是非洲，那也是一个比较容易的一个飞度问题，所以呢这样一个概念在这个优化里面呢，是用的是非常广泛的。

那么今天呢我们这里先讲个例子，讲个很有意思的一个例子，我们来看看一个非凸的问题，一个非凸也非泥土的问题，我怎么把它变成一个凸的问题，变成一个近似的凸问题，或者变成一个近似的理突的问题。

我们来看看这样一个具体的例子，好这个还是我们以前讲过的一个概念，就是向量的一个向量的零分数的概念，什么叫做一个向量的零拍数呢，比如说如果我有一个这样一个N维的，这样一个向量X，那么它的零拍数呢。

就是它中间所有的非零元素的个数之和，它的非零元素的个数好，那么我们以前已经讲过，这个函数不是一个凸函数吧对吧，我们再稍微回顾一下啊，我们为了简单起见呢，我们先举一个举个这种一维的例子来看一看。

好这是一个一维的情况，那么这个呢就是这个函数的曲线，当X等于零的时候呢，它的取值是等于零的，否则的话它的取值就是等于一的好，那么我们看这个函数是不是一个凸函数，不是的吧对吧。

因为我比如说我这样选择两点去做个连线的话，那么它一定是低于这样一个曲线的嘛，所以所以这个函数一定是一个，一定是一个非凸的函数好，那么对于这种一维的情况，它是不是一个拟凸函数。

是不是一个你拓函数是还是不是是的吧对吧，我们来看看这个定义就可以了，我们利用一下这个定义就可以了，好这是一维的情况，那么我们再来看一下一个二维的情况，对于这个二维的情况呢，我们就来画一个等高线的图，好。

那么这里我们来看看这个等高线应该怎么去画，首先呢如果当X1和X2都是等于零的时候，这个它的函数值就应该是等于零吧，对不对对吧，所以呢我这里呢我有一个等高线，但这个等高线只有一点。

就是就使得这个函数值FX等于零的这样一点，那么另外我们来看看哪些哪些点呢，能够让它的值是大于零的，或者说让它的值变成一，因为我们看它的取值可能是整数了嘛，对吧对不对，因为我统计的是它的非零元素的个数。

所以它的取值一定只能是整数，就是01234这样的取值，那么在哪些点它的取值是等于一的呢，在它的横轴或纵轴上面，对不对对吧，但是呢我要去掉这中间这么一点，好，就是有点类似于这样一个十字的这样一个形状。

那么我们再来看一看在哪些点的取值，它是等于二的，在其他的所有点上，它的取值全部都是等于二的好，那么我们来看一下啊，现在我们就可以去用一下这个关于阿a level set，这样一个定义。

我们来看看它是不是一个女图函数，我们看这个函数是不是跟你突的，我选择这个阿尔法的话，肯定是选择一个一个大于零的个数，对吧好，那么如果阿尔法等于0。5的话，这个集合是凸集吗，阿尔法阿尔法等于0。5。

我把所有FX小于等于0。5的，这样一些点全都给放到一起去，那么这个集合是不是初几，是的吧对吧，因为这时候就只有一点了嘛，好但是如果我把阿尔法给写成1。5呢，选择1。5呢，选择1。5的话。

那么这个集合就变成这个横轴和纵轴的，这样一个交集了，对不对对吧，这个集合显然不是个突击嘛对吧，所以这个函数肯定不是个拟凸函数，也就是说呢但这样一个一零分数，这样一个函数啊，它在这个一维的情况底下。

它是个他是个拟凸函数，但是呢在二维的情况以及更高维的情况，它就不再是一个拟凸函数了，好那么但是呢在这个实际当中呢，我们会经常碰到这样一类问题，我相信里面我们这个听课同学里面。

可能有不少人碰到过这一类的问题的，碰到这样的一类问题，就是我要极简化这个X的零分数，但是呢我要使得这个X在某个凸集里面，这个S是属于某个突袭C的这类问题，我相信肯定有不少同学碰到过吧。

这实际上就是我要在这个集合里面，找到一个这个最稀疏的这样一个X，所谓稀疏呢，就是指的是它的这样一个，它的这个非零元素取值上要尽可能的少，这是一类非常现实的问题啊，那么这个问题呢它又不一般来说。

如果当维数比较高的时候，它既不是这个目标函数，它既不是一个凸函数，又不是一个拟凸函数，这个做起来就很麻烦了，对吧好，那么怎么办呢，就是既然这样一个问题我们解决不了的话，我们就去解决一个近似的问题。

解决一个对它松弛一下，做成做做出一个比较简单的一个近似问题，这个近似问题呢如果你的运气比较好的话，你能够得到一个跟原问题一样的一个G，如果你的运气比较好，或者你你这个问题的设计比较合理的话。

那么你就可以得到一个跟原文一样的解，否则的话你可以至少得到一个可以用的一个解，对吧，这个就是我们的这样一个思路好，那我们来看一下，就是对于这样一个问题啊，我们实际上有这么几类的松弛方法。

这个松弛方法实际上是很有意思的，第一类方法呢，就是把这个问题给松弛成一个一个凸的问题，什么叫做to的问题呢，这个我们以后我们下一章就会讲到的，现在不要紧，我只是跟你讲，就是只要你的这个目标函数啊。

是一个凸函数，你的这个集合是一个突击，那么这个问题就是个凸问题，就是容易解的问题好，那么对于这样一个问题的话呢，我们一般如果想去做个凸松弛的话，我们怎么去做呢，我把这个零改成一，就这个X1范数。

把这个零范数改成一范数，我们这个一范数，它的定义是X中间所有的元素的绝对值的和，这这是关于一范数的定义，那么一分数这个函数啊，它是个什么样的一个函数，它是不是一个凸函数，是的吧。

为什么对范数一定是凸的对吧，零分数不是范数，零范数不是真正的范数，所以它是黑图的，但是呢一范数中它是个真正的范数，所以它一定是个凸函数，我们还是来画图来说明一下，啊这个呢是一个一维的情况。

就是在一味的情况下，这个X1范数其实就变成了X的绝对值了吧，好所以呢它的这个曲线就是这样一个形状的，很显然他是个凸函数，那么我们再来看看它的这个二维的情况，我们来给它画一下等高线。

好显然这个取值是一定是大于等于零的，那么在什么情况下等于零的呢，这一点嘛对吧好，那么比如说我再考虑下一个取值，就是就是他的一番数等于一，一般就等于一，是一个什么样一个东西啊。

X1的绝对值加上X2的绝对值是等于一的，也就是说实际上我是，画出了这样一个形状，对吧好，那么如果当他们等于二的时候呢，是个更大一点的这样一个形状，这个菱形，那么我们可以一直这么画下去。

很显然他的这个每所有的这个阿尔法，sl set都应该是凸起，为什么呢，比如说我举个例子，我把这个阿尔法给设置一，我如果把这个阿尔法给设置成一的话，他的阿尔法SLS是什么东西呢，就是。

就是整个的这样一个菱形吧对吧，很显然这个集合是个凸起嘛，好，那么这个函数呢，它肯定是一个肯定是个女凸函数的，而且实际上它也是一个凸的函数，这是没有问题的，但是呢有的时候把这样一个问题。

把他给松弛的太厉害了，其实是不好的，为什么呢，我们来看看这个这个这个前面的这第一幅图，我们看这个林盘树长的样子，其实就是很奇特的一个形状，好当N等于一的情况下，我们可以这么去近似。

我们随便的去选择一个非负的，一个恢复的一个实数A，比如说这个A我可以选择一就好了，那么我这么去近似，我设计这样一个函数，就是log ax平方加上一，那么很显然如果当X等于零的时候。

它的取值应该是等于零的吧对吧，那么当X大于零的时候呢，它的形状是一个类似于log的这样一条曲线，这样一条曲线，我们看这个形状跟这个形状，是不是要稍微接近一点，对不对对吧。

而且尤其是如果当我的这个A取得比较，取得比较大的时候，那么很显然这两个形状就会越来越像了，好那么这个也是一种逼近的方法，就是我将原来这个问题啊进行一个替换，我将原来这个问题呢变成这样一个问题。

我把它变成这样的问题，好，那么这个替换得到这样一个函数，是不是一个凸函数，不是个凸的吧对吧，这个函数很显然不是个凸函数吗，但是他为什么可以这样去近似呢，就是为什么有人还要这么去近似呢。

我们讲不是突然说话，这个问题可能就会变得很难了，但是这个形状它是一个它是个拟凸的吧对吧，这个形状是个拟凸函数的形状，好我们再来看一下，就是他的这个二维的情况是什么样子的，同样的它的取值等于零的话。

只有一点，就是X1和X2都是等于零的，那么这一点呢是它的，这个是它的这样一个取值是等于零的这么一点，那么如果我要让它的取值等于一的话，那么我就要选择某一个X，这个X是个什么样子的呢，这条线应该是什么样。

这样一条等高线是不是跟他一样，是一个方块的形状还是什么，还是什么样的形状，应该是一个是一个圆的形状吧，理解吧，因为我要使得这样一个东西，使得这样一个取值是一个定值嘛对吧，所以呢这地方就应该是个圆了。

好假设这条等高线是使得它的取值等于一的，这一条等高线，那么我要使得它的取值等于二的话，我应该是个更大的圆吧，好，那么这个圆它的距离应该是，就是这个圆和第一个圆的距离，应该是比第一个圆和这个圆点的距离。

要大还是要小呢，要大还是要小，要大大还是小要大是吧，好，因为我这里有个log这样一个函数放在这里，所以实际上这时候是放大的，我们看这里，我们就我们如果选定这个等高线呢。

我们选择这样一个刻度是是均匀分布的话，那么我们就会画一些越来越大的圆，这个距离会越来越远，很显然这个函数就是个理图函数啊，如果是凸函数的话，那么它的这个圆的距离会越来越近嘛，对吧。

这是个这样才是一个凸函数，所以这个函数呢一定是你凸的函数，这个呢就是一个很简单的一个例子，就是把这样一个原来一个非凸的问题呢，把它变成一个还是个非突问题，但是呢这个问题它是个理秃了。

可可以做起来会稍微方便一点，好，这个呢也就是为什么我们我们在这门课里面，要学习各种各样的图问题，或者你图问题，实际上就是这样一个原因，我们可以把一些原来我们就完全没法做的问题，一些很难的问题。

