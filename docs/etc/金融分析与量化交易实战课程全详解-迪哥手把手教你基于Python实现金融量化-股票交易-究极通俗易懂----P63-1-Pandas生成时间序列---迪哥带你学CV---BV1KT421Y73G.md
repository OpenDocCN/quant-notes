# 吹爆！Python金融分析与量化交易实战课程全详解，迪哥手把手教你基于Python实现金融量化+股票交易，究极通俗易懂！ - P63：1-Pandas生成时间序列 - 迪哥带你学CV - BV1KT421Y73G

![](img/3c617104f164302918027fbffcce3694_0.png)

这节课呀，咱们就来讲一下怎么样用这个pandas库啊，创建出来一个最基本的时间序列呃。

![](img/3c617104f164302918027fbffcce3694_2.png)

首先啊还是需要把我们所依赖的库，这个pandas。

![](img/3c617104f164302918027fbffcce3694_4.png)

还有南派现在导进来，然后呢咱们来看一下，就是时间序列啊，大概分成几种呢。

![](img/3c617104f164302918027fbffcce3694_6.png)

这里给大家列了三个啊，最常见的时间序列，第一个是一个时间戳。

![](img/3c617104f164302918027fbffcce3694_8.png)

时间戳的意思啊，就是说它是具体到时间的某一个点。

![](img/3c617104f164302918027fbffcce3694_10.png)

比如说现在啊咱们的2017年的7月19号，10：11分的第35秒。

![](img/3c617104f164302918027fbffcce3694_12.png)

那么这个是一个具体的时间点吧，在过去当中啊发生了很多时间。

![](img/3c617104f164302918027fbffcce3694_14.png)

但是呢我只关注于那么一个点啊，这个点是一个独一无二的。

![](img/3c617104f164302918027fbffcce3694_16.png)

然后呢还有一个时间周期和时间间隔，这两个都比较好理解。

![](img/3c617104f164302918027fbffcce3694_18.png)

下面呢啊就是随便找了一个咱们的一个数据啊，随时间变化的一个情况。

![](img/3c617104f164302918027fbffcce3694_20.png)

咱们要分析的就是嗯随着时间的变化啊，咱们这个数据啊发生了什么样的一个变化。

![](img/3c617104f164302918027fbffcce3694_22.png)

要挖掘出来这样的一个东西，那这节课咱们还涉及不到分析啊。

![](img/3c617104f164302918027fbffcce3694_24.png)

先给大家来说一下嗯，当我们想用pandas创建出来一个时间序列。

![](img/3c617104f164302918027fbffcce3694_26.png)

我们该怎么办呢，最简单的一个函数啊，有一个data range，这个data range啊。

![](img/3c617104f164302918027fbffcce3694_28.png)

咱们来看一下，比如说啊现在我想创建的是一个嗯，从一个2016年，然后7月1号开始，一直到呢7月10号截止，那我想穿出来这么十天的数据该怎么办呢，咱们来看一下。



![](img/3c617104f164302918027fbffcce3694_30.png)

就在这里啊，首先我指定了pandas as，然后点D的range里边呢，我可以传进来一系列参数啊。

![](img/3c617104f164302918027fbffcce3694_32.png)

咱们先来看啊，就是说嗯，这里边你既可以传进来一个起始时间，到终止时间的一个时间的一个间隔，你也可以传进只传进来一个起始时间，然后你说啊就是说在这个起始时之间上啊，你要是增加多少个周期。



![](img/3c617104f164302918027fbffcce3694_34.png)

比如说现在呢，我是以2016年的7月1号为起始日期。

![](img/3c617104f164302918027fbffcce3694_36.png)

然后呢在这里我指定了一个十，相当于是我接下来要做这样十个周期，或者说做这样十个数据出来，Frequency，咱们的一个频率啊，就是说你从这个7月1号开始啊，你是按天的网上去加，还是按小时。

还是按周还是按月啊，这个需要你指定好，比如说现在呢我想说啊，从这个7月1号开始，然后一天往一天上去加，咱们先来看结果，第一个结果就是17年的7月1日，然后7月2日。



![](img/3c617104f164302918027fbffcce3694_38.png)

7月3日，7月4日，一直到我最后的一个7月10日吧，在这里啊，就是说我们有一个频率需要大家注意一下，这个时啊比较好理解，就是说你造多少个数据啊，要造的一个周期是多长，那么这个频率啊需要我们指定一些东西。

比如说现在这个D啊指定的是一个day，相当于是以天为单位往上增加，那我们也可以进行改变，我们来看当我指定成一个M，会不会发生一个变化呢。



![](img/3c617104f164302918027fbffcce3694_40.png)

我再来重新的执行一下，指定成立一个M之后，我们来看一开始是咱们的一个啊。

![](img/3c617104f164302918027fbffcce3694_42.png)

一开始它变成了一个7月31日，然后呢7月31之后啊。

![](img/3c617104f164302918027fbffcce3694_44.png)

然后8月31日，9月30日，10月31日，那相当于什么，相当于呢我的一个周期啊。

![](img/3c617104f164302918027fbffcce3694_46.png)

是按照一个月往上增加，那我们还可以再换一下，我换成一个hour。

![](img/3c617104f164302918027fbffcce3694_48.png)

换成一个H，那这个时候是不是说嗯7月1日的一个零点。

![](img/3c617104f164302918027fbffcce3694_50.png)

然后1。2。3。1直到九点啊，这里呢就是说啊，我们可以指定一些我们的一个频率。

![](img/3c617104f164302918027fbffcce3694_52.png)

整点下面我会给大家注释一个表，就是说所有的可选项，到时候都给大家注释起来了，常用的就是这些啊，咱们的一个天啊，月还有这样的一个小时，那这里呢比如说我想指定天的时候，我不想一天一天去增加。

我想三天三天一增加，可不可以啊，那我指定一个3D，我再来看一下3D的一个结果啊。

![](img/3c617104f164302918027fbffcce3694_54.png)

7月1日，7月4日，7月7日吧。

![](img/3c617104f164302918027fbffcce3694_56.png)

也就是说啊，当我们指定一个频率的时候，不光可以指定你是按照什么样的一个计算方式。

![](img/3c617104f164302918027fbffcce3694_58.png)

你还可以指定它的一个倍数是多大，指定一个3D啊，表示着咱们三天，那3M是不是表示三个月呢，3H就是表示这三个小时这里啊，这些是我们可以指定的一个量，然在这里啊，一会儿我们还给大家举个例子。

就是我们不光指定一个起始时间，我们也可以指定这样一个，从哪年到哪月的一个截止啊，我们可以去做这样一个事情，就是说你把起始日签，把终止日期啊都写好了，然后呢你不写这样一个周期啊。

你写这样一个频率也是可以的，那写这个时间啊，我们有几种写的方式啊，比如说现在呢我是这样的一种时间书写方式，那我假设说啊我换一种方式，我们来看一下，假如说啊现在我用这种方式啊。



![](img/3c617104f164302918027fbffcce3694_60.png)

中间我用一个英文的缩写能不能做出来呢，我们来看也是可以把这个时间读进来的吧。

![](img/3c617104f164302918027fbffcce3694_62.png)

然后这块我们再来看，就是当我们用这个杠的时候。

![](img/3c617104f164302918027fbffcce3694_64.png)

这个我们来看一下，你说他是7月1号呢还是1月7号啊，我们来执行一下它是什么，它是7月1号吧，第一个表示一个月份，第二个表示日，最后表示年，那我再来换一下，那这个呢这个表示什么。

那这个表示这不就是1月7号吗。

![](img/3c617104f164302918027fbffcce3694_66.png)

我们执行一下啊，这是一个1月7号我们的时间啊。

![](img/3c617104f164302918027fbffcce3694_68.png)

写的方法有好多种，这些方法都是可以把这个时间啊执行出来的，嗯这点给大家注释了几种。

![](img/3c617104f164302918027fbffcce3694_70.png)

这种时间啊都是可以把我们的一个让日期啊，然后给他写出来。

![](img/3c617104f164302918027fbffcce3694_72.png)

然后结果它都是一致的，都是pandas as这样的一个类型的。

![](img/3c617104f164302918027fbffcce3694_74.png)

那当我们指定一个时间的时候啊，比如说我想造一个数据的时候啊。

![](img/3c617104f164302918027fbffcce3694_76.png)

这里我用只用了一个pandas as的一个series，相当于啊造了这样一个局部的数据，在这个数据当中啊，用安排啊，随机的帮我指定出来一些值，并且呢我指定了啊，咱们的一个index值。

index值等于什么，等于我的一个时间吧，我们来看这里啊。

![](img/3c617104f164302918027fbffcce3694_78.png)

我传进来的就是我的一个时间的一个量吧，就只来在这里。

![](img/3c617104f164302918027fbffcce3694_80.png)

就是说我没有传进来什么，我没有传进来的是嗯，咱们的一个就是这个呃就是没有传进来。

![](img/3c617104f164302918027fbffcce3694_82.png)

就是咱们的一个叫什么啊，frequency就是咱们的一个频率吧。

![](img/3c617104f164302918027fbffcce3694_84.png)

那这里啊就是说如果说你不传进来一个频率，它默认的一种情况。

![](img/3c617104f164302918027fbffcce3694_86.png)

它的频率啊就是一个D就是说它默认是一个天，然后呢我写上它的一个周期是等于20的。

![](img/3c617104f164302918027fbffcce3694_88.png)

有一个起始起始时间，这样我就把我的一个数据给它做出来了，我们可以啊。

![](img/3c617104f164302918027fbffcce3694_90.png)

拿我们的一个时间当成我的一个索引，在serious当中啊，是不是指定了索引。

![](img/3c617104f164302918027fbffcce3694_92.png)

就是为我当前的一个日期啊，那指定索引有什么好处啊，咱们来看好。

![](img/3c617104f164302918027fbffcce3694_94.png)

咱们先不看过滤，先看索引啊，指定完索引之后啊，是不是说呃我通过我的一个时间。

![](img/3c617104f164302918027fbffcce3694_96.png)

我实际上是可以通过我的一个时间啊，就把我的一个数据拿出来了。

![](img/3c617104f164302918027fbffcce3694_98.png)

还可以通过这样一个切片，把我这样两个时间的间隔拿出来，这里呢就是说啊我们可以通过嗯指定索引。

![](img/3c617104f164302918027fbffcce3694_100.png)

然后去通过时间啊把数据拿到手。

![](img/3c617104f164302918027fbffcce3694_102.png)

然后呢，这块就是当我们不想指定一个时间的。

![](img/3c617104f164302918027fbffcce3694_104.png)

一个嗯间隔，或者说你想就是做出来多少个时间，我们也可以啊。

![](img/3c617104f164302918027fbffcce3694_106.png)

在这里就是指定一个起始时间，然后还有个终止时间，在这里呢再输上咱们的一个频率。

![](img/3c617104f164302918027fbffcce3694_108.png)

这样它就会从你的一个起止时间，到终止时间之间啊，把这个数据给它做出来。

![](img/3c617104f164302918027fbffcce3694_110.png)

这个做数据啊，一般情况下当我们再去画图啊，或者说是在进行一个统计分析的时候。

![](img/3c617104f164302918027fbffcce3694_112.png)

经常会用到这样的一种时间的格式，来对数据进行一个分析的。

![](img/3c617104f164302918027fbffcce3694_114.png)

那下面就是说我们关于这个frequency啊。

![](img/3c617104f164302918027fbffcce3694_116.png)

咱们的刚才不是写了ZM吗，它里边有哪些可选的值呢，我们来看呃。

![](img/3c617104f164302918027fbffcce3694_118.png)

首先啊最常见的就是这个DH，还有M吧，咱们一天呐一小时啊。

![](img/3c617104f164302918027fbffcce3694_120.png)

还有咱们也可以工作日啊，你分呐秒啊，毫秒都是可以的，后面还有一些其他就是的指标。

![](img/3c617104f164302918027fbffcce3694_122.png)

比如说季度的一些啊什么，或者是每个月份啊。

![](img/3c617104f164302918027fbffcce3694_124.png)

最后一个工作日啊，第一个工作日等等，这里呢有很多指标，就是在这里给大家列了个表。

![](img/3c617104f164302918027fbffcce3694_126.png)

大家感兴趣啊，可以把表当中啊，每一个值都给它来进行一个尝试。

![](img/3c617104f164302918027fbffcce3694_128.png)

然后呢我们有一个过滤的操作，就是在我们这里就是我们可以指定一个before值啊。

![](img/3c617104f164302918027fbffcce3694_130.png)

比如说现在我做了一个时间，它是2016年1月1日，到2016年的1月20日。

![](img/3c617104f164302918027fbffcce3694_132.png)

在这里我写了一个笔，before值相当于什么嗯，相当于它是过滤。

![](img/3c617104f164302918027fbffcce3694_134.png)

就是说嗯不是说啊咱们取的是1月10号之前的，而是说我1月10号之前的都不要了。

![](img/3c617104f164302918027fbffcce3694_136.png)

相当于啊这个过滤我们来看，原来是有1月1号到20号的吧。

![](img/3c617104f164302918027fbffcce3694_138.png)

我写了一个比before2016杠一杠十，那是不是10号之前的就都没有了。

![](img/3c617104f164302918027fbffcce3694_140.png)

那现在的数据只有10~20的，你也可以写个after after，相当于什么。

![](img/3c617104f164302918027fbffcce3694_142.png)

就是1月10号之后的我就都不要了啊，这个就是一个过滤，那现在保留下来的是。

![](img/3c617104f164302918027fbffcce3694_144.png)

只有1月1号到1月10号的一个数据吧，我们也可以啊对数据进行一个选择。

![](img/3c617104f164302918027fbffcce3694_146.png)

你使用切片，使用咱们的过滤啊，都是可以的，然后呢我们的一个时间戳啊。

![](img/3c617104f164302918027fbffcce3694_148.png)

在时间戳上，比如说我们用tapandas as啊，指定出来这样一个时间戳，时间戳里啊。

![](img/3c617104f164302918027fbffcce3694_150.png)

你可以指定啊固定到它的一个就是单位值，比如说现在我指定一个T那相当于什么，相当于它会固定啊，咱们的一个秒数就是hour和咱们的一个分钟，还有咱们的一个秒数都是零，那当然了，你也可以把这个东西啊给他。



![](img/3c617104f164302918027fbffcce3694_152.png)

具体的给它指定起来啊，这些值啊都是我们可以自己网上去加的。

![](img/3c617104f164302918027fbffcce3694_154.png)

还可以指定我们的一个时间的一个区间，比如说呃16年的1月份。

![](img/3c617104f164302918027fbffcce3694_156.png)

或者16年的1月1号，这些我们都是可以进行一个指定的，呃还可以指定啊。

![](img/3c617104f164302918027fbffcce3694_158.png)

咱们这个offset offset，意思啊，就是说嗯我们对时间也可以进行一个加减。

![](img/3c617104f164302918027fbffcce3694_160.png)

我们指定了这样一个time delta，time delta相当于是我们要做这样一个偏移量了。

![](img/3c617104f164302918027fbffcce3694_162.png)

嗯偏移掉，比如说现在呢我指定出来一个时间啊，它不是一个具体时间。

![](img/3c617104f164302918027fbffcce3694_164.png)

我说啊它就是一天就是一个写上一个1day，1day是什么，就是咱们的一个24小时嘛。

![](img/3c617104f164302918027fbffcce3694_166.png)

相当于然后呢我对于一个呃就是时间周期啊。

![](img/3c617104f164302918027fbffcce3694_168.png)

我让它可以进行一个加法哈，咱们的时间可以进行一个计算的。

![](img/3c617104f164302918027fbffcce3694_170.png)

让它呀加上这样一一对，我们来看加一对之后啊，它就变成了一个1月2号吧。

![](img/3c617104f164302918027fbffcce3694_172.png)

那不光我们可以加一倍，我们可以加上很多其他值，加上其他值之后。

![](img/3c617104f164302918027fbffcce3694_174.png)

我们就得到了一个不同的结果值，然后呢如果说啊你想用这个frequency啊。

![](img/3c617104f164302918027fbffcce3694_176.png)

进行指示的时候，不光比如说咱们像二，每25小时进行一个计数。

![](img/3c617104f164302918027fbffcce3694_178.png)

你可以写一个25H，或者说啊你就是写的更通俗一些。

![](img/3c617104f164302918027fbffcce3694_180.png)

你可以写一个EDEH，相当于啊一天一小时，这样呢我们都是可以把这个数据啊造出来啊。

![](img/3c617104f164302918027fbffcce3694_182.png)

他的长相都是一模一样的，所以啊该给大家说过了。

![](img/3c617104f164302918027fbffcce3694_184.png)

就是我们可以指定一个索引，用索引啊是一个比较方便的一种格式的。

![](img/3c617104f164302918027fbffcce3694_186.png)

那这些啊就是说啊我们用这个嗯，用我们的一个pandas可以很轻松的啊。

![](img/3c617104f164302918027fbffcce3694_188.png)

把我们帮我们把咱们的一个时间类型，这样的一个数据啊给它做出来。

![](img/3c617104f164302918027fbffcce3694_190.png)

然后呢我的一个时间戳啊，和我们的一个周期还可以进行转换，这个等到时候用。

![](img/3c617104f164302918027fbffcce3694_192.png)

到时候咱们再说，就是有这样一个函数啊，叫做一个嗯由我们的首先创建一个时段时间戳。

![](img/3c617104f164302918027fbffcce3694_194.png)

然后由这样的一个函数啊，可以把咱们这个时间戳啊，转换成我们的一个时间周期。

![](img/3c617104f164302918027fbffcce3694_196.png)

这个暂时还用不上啊，然后在我们的时间周期啊，和时间戳的一个区别是什么。

![](img/3c617104f164302918027fbffcce3694_198.png)

我们来看一下，如果说你指定的是嗯，当前的一个就是当前是一个时间周期。

![](img/3c617104f164302918027fbffcce3694_200.png)

那我指定的一个索引是一个切片，在这个8。30到11。45。

![](img/3c617104f164302918027fbffcce3694_202.png)

那它还会包含这个八点吧，因为这个八点呢也是在我的一个这个时间的。

![](img/3c617104f164302918027fbffcce3694_204.png)

一个周期当中，但是呢如果说你用这个时间戳来说啊，他就不会了，因为八点是不在我这个具体的时间的，某一点当中，这块是有一点区别啊。



![](img/3c617104f164302918027fbffcce3694_206.png)

大家需要注意一下，等之后啊，咱们再用到时间的数据的时候，再给大家来说一下嗯。

![](img/3c617104f164302918027fbffcce3694_208.png)

这节课其实啊主要给大家说的就是，咱们怎么样去把这个时间数据啊。

![](img/3c617104f164302918027fbffcce3694_210.png)

先给它做出来，以及呢咱们怎么样用这个频数，还有这样一个起始位置啊，控制着我们的数据的一个生成的样子啊。



![](img/3c617104f164302918027fbffcce3694_212.png)

这就是咱们的一个最基本的。

![](img/3c617104f164302918027fbffcce3694_214.png)