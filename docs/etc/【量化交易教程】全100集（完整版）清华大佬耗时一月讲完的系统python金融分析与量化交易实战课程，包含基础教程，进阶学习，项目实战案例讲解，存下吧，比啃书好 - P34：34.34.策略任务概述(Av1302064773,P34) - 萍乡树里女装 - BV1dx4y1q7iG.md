# 【量化交易教程】全100集（完整版）清华大佬耗时一月讲完的系统python金融分析与量化交易实战课程，包含基础教程，进阶学习，项目实战案例讲解，存下吧，比啃书好 - P34：34.34.策略任务概述(Av1302064773,P34) - 萍乡树里女装 - BV1dx4y1q7iG

![](img/52687b9521cb012375b5c0d645702fbe_0.png)

行了，那给大家说一说吧。哎，你说提纯这件事儿啊，我该怎么去做啊？😊，比如说现在我这样，我说我有一个因子啊，说这个PB它就是我的一个因子行吧。然后呢，我说这个因子当中啊，有一些我不想要的成分，谁呀？

那比如说现在我发现了这个市净率啊，跟这个市值啊，它关系挺大的。然后呢，在市净率当中啊，包括了一些跟市值相关的东西，那我既然要提纯，那是不是说现在哎我说这是我的一个因子啊，表示我的一个市净率，然后呢。

这个它是一个市值是吧？我是不是说想在这里哎，我把蓝色这个东西给它清出去啊，是不是做这样一件事啊，那怎么清啊，你是不是先知道市值，哎，比如说我说因子，我说因子现在是个整体。

我们是不是想看一看市值啊解释了这个因子当中的哪一部分，我把这一部分找到，然后呢，我做一个减法，做完减法之后，我剩下的是不是就是我中心化之后的一个结果啊，那怎么做呢？我是这样现大家觉得。😊。



![](img/52687b9521cb012375b5c0d645702fbe_2.png)

例子，哎，我说我做一个封城。这个方程当中啊，大家一定注意啊，就是谁等于谁啊。我说我现在做这个因子啊，就好比是我的一个市净率啊，我说这个因子啊，刚才你不是说了吗？跟谁相关的，跟我这个市值相关。

那我说这样吧，我说这个市值啊，我写出来，这里我说有一个市值。😊，市值跟它相关啊，那是不是得有一定关联程度啊，那给我们感觉好像这样，哎，就像是一个Y等于这个WX加上一个B的过程吧。好了，我说这块市值。

你在给我乘上一个W再加上一个B行吧，我说有这样的关系，既然你说市值占因子当中一部分，那我把它俩列出这样一个式子，没问题吧。哎，那大家来想啊，那现在我们要干什么？我是不是要找到因子当中市值占了多少。

那说白了我要干一件什么事啊，这个东西叫什么？😊，这都叫什么？它是不是哎就是一个回归方程啊？如果说我能把这个回归方程给它解出来，什么叫解出来，我知道W是什么，知道B是什么，我是不是就能知道了。哎呦。

这个市值啊占我因子当中多大的一个成分了。哎，是不是这样一件事啊，但是我问大家一件事儿啊，我们之前哎在讲线应回归的时候，在机济学课程当中啊，我经常会讲其我都是先讲线应回归。那问大家一件事儿。

我说现在啊当你得到了这个W得到了这个B之后，你跟市值啊就是W乘上市值，再加上B之后，你还原回去得到什么？😊，我一般情况下管这个东西叫什么？是不是叫做一个预测值啊？哎，当前我说现在我拿绿色框且这个东西。

我说这个东西啊叫做什么叫做一个预测值，哎，这有没有什么问题啊，没问题吧。然后呢，我说现在我这块是不是还列了一个Y，这个Y是什么？我说这个东西啊，它是什么？它是我的一个真实值吧，是不是我的一个真实值啊。

那现在大家看哎你说这块我们列了是一个等式，但实际当中你真能得到一个等式吗？在现回归当中，你真能得到这个等式吗？不一定吧，我们得到什么是一个近似解吧，实际当中那表示什么意思？好像说这样一件事啊。哎。

我做一个回约方程，用啊我的一个Y，或者说用我的一个标签，表示我的因子，用的是值表示我的输入数据，我现在就想看一看我是值解释了因子当中多大一部分，我做了这样一个回归方程得到了W和B吧。然后呢，我说这样。

😊。

![](img/52687b9521cb012375b5c0d645702fbe_4.png)

![](img/52687b9521cb012375b5c0d645702fbe_5.png)

![](img/52687b9521cb012375b5c0d645702fbe_6.png)

![](img/52687b9521cb012375b5c0d645702fbe_7.png)

![](img/52687b9521cb012375b5c0d645702fbe_8.png)

![](img/52687b9521cb012375b5c0d645702fbe_9.png)

![](img/52687b9521cb012375b5c0d645702fbe_10.png)

![](img/52687b9521cb012375b5c0d645702fbe_11.png)

WB哎呦，欢迎回去。W常试值再加上B之后，得到这个东西叫预测值吧。那预测值和真实值之间是不是会有一个差异？哎，预测值和真实值之间肯定会存在一个差异吧。我们一般情况下叫做这个误差项，为什么会存在差异呢？

为什么会存在差异啊？我们现在这个预测什么意思？我要看呃有因子当中多大一部分能被市值所解释，它们之间的一个差异代表什么？它们之间差异哎，画这个图当中是不是这样，我说现在啊。



![](img/52687b9521cb012375b5c0d645702fbe_13.png)

![](img/52687b9521cb012375b5c0d645702fbe_14.png)

![](img/52687b9521cb012375b5c0d645702fbe_15.png)

有这个啊重新画这个图，在在这来画吧，在这换行，就是在接下来这画得了。换个颜色。我说这个图啊它本来是个红色的。然后呢，试值解释了其中蓝色这一部分，那它们的差异代表什么？差异在哪儿啊？

是不是我现在画圈的这一部分，这一部分代表着我当前的一个差异啊，什么意思啊？真实值和预测值之间必然存在一个差异，这个差异就是市值，你解释不了因子的那一部分，可以吧？说白了回方程当中啊，我们建立了一个联系。

建立联系的意思，我就找到了市值在因子当中多大的一部分，或者说市值能解释因子当中多大一部分。一旦我做一个减法，用真实值减去我的一个预测值，我能得到什么？是不是就是我想干的一件什么事啊？

就是提纯的这一件事儿吧。好了，咱们来总结一下，一会我应该怎么去做。第一步啊，我们要建立回方程，建立回方程过程当中啊。😊。



![](img/52687b9521cb012375b5c0d645702fbe_17.png)

![](img/52687b9521cb012375b5c0d645702fbe_18.png)

![](img/52687b9521cb012375b5c0d645702fbe_19.png)

![](img/52687b9521cb012375b5c0d645702fbe_20.png)

![](img/52687b9521cb012375b5c0d645702fbe_21.png)

你一定注意哎，谁当Y哎，谁当Y是把因子当Y吧。好了，注意点，我是把因子当Y了啊。你想剔除谁的影响，把谁当做一个X吧，要做这样一件事儿。好了，第一步求解回方程当中的一个W和BW和B解完之后啊。

我有了一个X。我是不是趁现现在我手里有因子实际的值，用因子实际的值。哎，比如这个Y减去什么，你的一个预测值吧，大家不要大家以前如果说对基学习不熟悉啊，你看我这边写个等号，不是说它俩就是一定相等。

我是说这里要建立回方程，哎，尽可能去估计W和B啊这样一件事儿。所以说现在我们给大家解释了一下，咱们该怎么去求。那一会儿呢。



![](img/52687b9521cb012375b5c0d645702fbe_23.png)

中心化的做法图为大家啊现在也猜到了。第一步建立回归方程。第二步呢用回归方程当中的这就是用回约方程得到的结果被谁减去啊，被你的一个因子实际当中值减去。

这相当于在因子当中啊刨除了哎我一些我的跟其他的呃就是你想刨除掉的哪些定有影响的。这样咱们做一个减法，得到剩下的是不是就是因子实际该有的一些信息了。我们把这个过程啊就叫做一个提纯。😊，说的挺复杂呀，哎呦。

我天说的是不是挺复杂，但是其实做起来是不是挺简单，哎，就是在我意影当中减去啊，不能被你当前的一些值呃。比如说比比如说在市盈率当中减去不能被咱们的一个市值所解释那一部分。

剩下的就是我要的一个纯的这个意思啊，说的有点绕大家自己来理解一下，看一看是不是我们说的回归方程哎，这样一个意思。😊。



![](img/52687b9521cb012375b5c0d645702fbe_25.png)

![](img/52687b9521cb012375b5c0d645702fbe_26.png)

行了，最后我们要做一个因子的一个策略啊，先在大家说一说呃，咱们这个策略啊，然后要怎么去做啊，是这样一件事儿。我先把这个过程写完，一会儿呢咱来写这个策略。



![](img/52687b9521cb012375b5c0d645702fbe_28.png)

![](img/52687b9521cb012375b5c0d645702fbe_29.png)

![](img/52687b9521cb012375b5c0d645702fbe_30.png)

我是这样，现在既然我们提到了啊有两个指标，1个PPR是吧，我们定市净率，还有个市值行了，把他俩指标先拿出来。一会儿你不是要干什么吗？你不要去玩这个那个什么中性化是吧？哎。

咱一会儿拿这两个值来给大家举个例子啊。然后哎对，这里我说这个中性化，其实还忘说一点，我们现在说的是什么？因子要做中性化吧。其实在实际一些调化当中啊，不光因子做做这个中性化，一些行业是不是也能做中性化啊。

其实能做的事蛮多啊，这些咱先不给大家做延伸啊，大家后续可以自己来去看资料，能做的东西还蛮多的，咱就先拿因子来来给大家举例子。😊。



![](img/52687b9521cb012375b5c0d645702fbe_32.png)

![](img/52687b9521cb012375b5c0d645702fbe_33.png)

![](img/52687b9521cb012375b5c0d645702fbe_34.png)

![](img/52687b9521cb012375b5c0d645702fbe_35.png)

在这个PPR和适数据，我先拿到手一些指标。然后呢，在数据当中啊，我要做一个剔除的操作啊，比如说现在股票池里边，我要剔除一些我不喜欢的，或者说剔除一些垃圾吧，什么垃圾啊，停牌的呀，ST股啊。

还有一些新上市的呀，比如说小于半年半半年之内上市的，我可以先都不管剔除掉一些我不想要的股票。然后呢，依次对我们数据要做处理，哎，按照的顺序啊去集值啊，标准化中性化。然后我们处理完处理完之后呢。

我们要做这样一件事儿啊，考虑干什么，基于我处理后的结果来去选股了。比如说现在我说这个市净率。

![](img/52687b9521cb012375b5c0d645702fbe_37.png)

![](img/52687b9521cb012375b5c0d645702fbe_38.png)

![](img/52687b9521cb012375b5c0d645702fbe_39.png)

啊，我说他现在小于0。2的，我认为是我比较喜欢的。我说我把所小点。2结果哎拿出来，基于这个策略，来去选股是不是行啊？说白了就是一个基于因子来去选择股票池当中啊，哪些我要买哪些我要卖啊这样一件事儿。

这个是一会儿啊咱们要完成的一个任务啊，中医化咱在这个策略当中啊，给大家一步去写吧。挪卜当中咱不看了啊，一会儿咱直接拿平台来玩这样一个例子。



![](img/52687b9521cb012375b5c0d645702fbe_41.png)

![](img/52687b9521cb012375b5c0d645702fbe_42.png)

![](img/52687b9521cb012375b5c0d645702fbe_43.png)