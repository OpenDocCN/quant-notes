# 第33节课 类9 迭代器和生成器 - P1 - 古辰诗提 - BV1w1421X7KN

欢迎大家来到从零开始量化系列课程，Python基础课的第33课，上一节课的后边呢，给大家讲了这个几个容易混淆的这个魔术方法，一个是get AD t r，一个是get attribute啊。

这个它的区别就是每一次你再用点，或者说用get htr这个内置方法去调用的时候，它首先去找的是这个get attribute，如果说在get built里边找不着，而且你没有去实现GDTR这个方法。

它会报错，如果说你实现了GDTR这个方法，他会去get a t t r里边去获取你给他的这个值，也就是它的return值，所以这个会让你的代码更加的健壮，就是在一些你去调用属性的时候，不知道的属性。

它会给你返回一个浪值，不至于就是报错而引起这个整个程序的中断，另外大家一定要清楚的是什么呀，就是说他在找这个变量的时候如何去找的，就是找这个类属性，他首先肯定是去P。

就是实例化之后的这个dict里面去找，如果找不着的话，他会去它的类属性里面去找，就是呃咱们之前讲过这个class点，刚刚dict里面去找，如果还找不着的话。



![](img/459b92cdac72d5ce9f943ca1509b66a8_1.png)

他就会去他的父类里面去找，如果找了一圈也没找着，他就会去找这个get AD t r嗯，如果get AD t r你没有实现，它就会报错，实现了它会就是说给你返回它的值好，这个时候呢我把这个都全注释掉。

我把它的其他的也注释掉了，只有一个类，然后它实现了两个实例，然后其中一个实例的呢我给他复制成了100，这时候我运行一下，你会发现啊，他在赋值是吧。



![](img/459b92cdac72d5ce9f943ca1509b66a8_3.png)

他肯定是你在向右拆分，你在初始化的时候给它赋了三个值。

![](img/459b92cdac72d5ce9f943ca1509b66a8_5.png)

它会执行三遍，然后两个初始化它会执行六遍，再加上一个就是说复制，它又会执行这个sat AD t r，但是你会发现后边还跟着一个get bute，这是他为什么会执行这个呢。



![](img/459b92cdac72d5ce9f943ca1509b66a8_7.png)

因为你在SADTR里边用了个点，所以说他会去执行get built，这就是为什么咱们在上节课跟大家讲过，你一定不要在这个方法里边去使用你自己的，就是用self点cf点，这样它会造成这种死循环的啊。

这是一个点。

![](img/459b92cdac72d5ce9f943ca1509b66a8_9.png)

大家一定要记住，但是一般情况下，这个git就build不会去自己去实现的好吧。

![](img/459b92cdac72d5ce9f943ca1509b66a8_11.png)

不用去重写的啊，然后就是说他用这个。

![](img/459b92cdac72d5ce9f943ca1509b66a8_13.png)

他会去找这个get attribute，其实你可以换一种方式写，就是super括号点杠杠SDTR。

![](img/459b92cdac72d5ce9f943ca1509b66a8_15.png)

然后把这个杠杠name和刚刚value给它传进去啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_17.png)

这个时候你再执行一遍，它就不会有这个get built了，是吧好。

![](img/459b92cdac72d5ce9f943ca1509b66a8_19.png)

这个是上节课讲的内容，咱们这节课接着往后讲，还剩几个魔术方法，咱们把它讲完，Dm 33tt one。

![](img/459b92cdac72d5ce9f943ca1509b66a8_21.png)

把之前的这个例子给它粘过来。

![](img/459b92cdac72d5ce9f943ca1509b66a8_23.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_24.png)

好把之前讲过的给他给删掉。

![](img/459b92cdac72d5ce9f943ca1509b66a8_26.png)

删到这把这个给它打开，啊这个里边有些问题啊，sit应该是把它这个它赋值的这个呃，值给它给传进来是吧，还是delete还少写了，第l e t delete self value print。



![](img/459b92cdac72d5ce9f943ca1509b66a8_28.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_29.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_30.png)

好咱们现在开始讲这个GSAT，最主要是这俩，这个就是其实这俩会了，这个就肯定就会了是吧。

![](img/459b92cdac72d5ce9f943ca1509b66a8_32.png)

这个呢它叫描述符，把这个给粘过来啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_34.png)

什么叫描述符。

![](img/459b92cdac72d5ce9f943ca1509b66a8_36.png)

这需要引入一个问题，比如说我从这我新建了一个class，他自称继承自object，不是继承上面的这个类啊，object然后这里边有两个属性，风驰电话的意思。

然后owner o w n e r就是它的主人主人，我就写一个person，这里边我传入一个小张。

![](img/459b92cdac72d5ce9f943ca1509b66a8_38.png)

193十，我再写一个price。

![](img/459b92cdac72d5ce9f943ca1509b66a8_40.png)

就2000块钱啊，price这个两个属性它是不能随便改的对吧，你这个主人和你这个价格它是不能随便改的，但是如果说比如说这个price这个价格2000，你从里边给设定了之后，我实例化一个，比如P1等于负。

我直接是可以把你这个P1给改掉的啊，不是P1点price是改掉的，比如说我就改成1万。

![](img/459b92cdac72d5ce9f943ca1509b66a8_42.png)

这个时候你在print这个P1啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_44.png)

Dear price，它肯定就变成1万了啊，因为什么呢。

![](img/459b92cdac72d5ce9f943ca1509b66a8_46.png)

因为他首先查找的是P1点杠杠，Dict。

![](img/459b92cdac72d5ce9f943ca1509b66a8_48.png)

他首先查找的是是这个这个里边price是1万。

![](img/459b92cdac72d5ce9f943ca1509b66a8_50.png)

即便咱们再输出一个P1点杠杠。

![](img/459b92cdac72d5ce9f943ca1509b66a8_52.png)

class点杠杠dict。

![](img/459b92cdac72d5ce9f943ca1509b66a8_54.png)

即便它的类属性里边也有price，Yellow，Price price2000，但是呢他在调取的时候，因为你从外部给他把实例属性给改变掉了，所以说他不会去呃类属性里边去找了。

所以说他就直接给你返回了一个，就是说1万，如果说我不想让他给我随便改怎么办，比如说我这个里边我实现了一个git和sat啊，这个时候我要改这个。



![](img/459b92cdac72d5ce9f943ca1509b66a8_56.png)

我把这个线给注释掉，我要改我这个person，比如我从外边P1点person。

![](img/459b92cdac72d5ce9f943ca1509b66a8_58.png)

B点owner把它改成小红，咱们再来print一下。

![](img/459b92cdac72d5ce9f943ca1509b66a8_60.png)

这个P1点。

![](img/459b92cdac72d5ce9f943ca1509b66a8_62.png)

Owner。

![](img/459b92cdac72d5ce9f943ca1509b66a8_64.png)

你会发现他是个浪值啊，你会发现他是个浪值对吧，然后他为什么会是个NN值呢，为什么会这个当值它没有改，咱们可以去查一下，就是说P点杠杠dict，你发现即便是我从外边给它附了一个P点。



![](img/459b92cdac72d5ce9f943ca1509b66a8_66.png)

Owner，按照之前这种写法，它这里边应该是有这个owner，然后冒号小红呃，小张的对吧，但是这没有。



![](img/459b92cdac72d5ce9f943ca1509b66a8_68.png)

为什么呢，这就是描述符的作用啊，这就是描述符的作用，它的作用其实就是管理你这个数据，尤其是你像需要一些不能随便改变的数据，或者说你不想让他就是说随便给赋值，比如说我需要一个STR类型。

你给我做成一个int类型，我需要一个，比如说我指定的一个object的类型，你给我复制一个其他的类型，这样会产生一些莫名其妙的错误，你就可以用这种描述符的形式来给他管理，我的这个变量或者属性啊。

这个里边它为什么是NN值，因为它在设置的时候，你并没有给他，就是说这个值如果说我直接return一个返回cf点。



![](img/459b92cdac72d5ce9f943ca1509b66a8_70.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_71.png)

我直接return一个返回self name，就是get从get这个不用返回从get，我这个时候我再来去调用的时候，比如说P1点owner，你会发现他还是小张，即便给复制成了小红，他还是小张是吧。

这是如果说它是一个数额，就是描述符，数据类型就是数据描述符，他不会就是说随意的去改变，它会根据它，会根据你这个描述服务里边，这个git和sat执行的情况来进行改变，同样的我给它赋值的时候。

owner等于小红，它其实没有做任何的动作，因为他调了这个sat类型了是吧，sat他没有做任何的动作，如果说我给他去修改的时候，我从这儿我给它重新赋一下值，比如说1value不等于不等于。

比如说小张老张，我我只可以让他给他的父亲是吧，如果不等于老张的话，我return self点。

![](img/459b92cdac72d5ce9f943ca1509b66a8_73.png)

我就把我自己给return出去。

![](img/459b92cdac72d5ce9f943ca1509b66a8_75.png)

他接的应该是偏owner，Owner，它是一个person类型嘛，我还是把我自己给给turn出去就可以了。



![](img/459b92cdac72d5ce9f943ca1509b66a8_77.png)

如果是else，如果说他变成了老张了。

![](img/459b92cdac72d5ce9f943ca1509b66a8_79.png)

我self name等于老张。

![](img/459b92cdac72d5ce9f943ca1509b66a8_81.png)

然后我再把我自己送出去是吧。

![](img/459b92cdac72d5ce9f943ca1509b66a8_83.png)

当然就可以直接给他简写一下啊，你给他简写一下也行，基本没有这个啊，那个简写一下也行啊，我就先这么写了，这个时候你给它赋值是没用的，但是我如果把它改成老张诶，他会他就会变成老张了。

因为它赋值的时候它会调用这个sat啊，它会调用这个sat，然后获取值的时候，你可以随便定义，比如name加上s t r shift price。



![](img/459b92cdac72d5ce9f943ca1509b66a8_85.png)

就是可以根据你的这个要求，name加上sage啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_87.png)

这个时候你给他返回出来了，看一下就是老张30啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_89.png)

老张30，当然你可以给他把这个年龄再给改一下啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_91.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_92.png)

这个时候他就是老张80了，如果说你这是小红，他不会去变的。

![](img/459b92cdac72d5ce9f943ca1509b66a8_94.png)

它P点O呢还是小张30，这就是数据描述符。

![](img/459b92cdac72d5ce9f943ca1509b66a8_96.png)

从这你要注意一个点，如果说我sit没有去实现的话，没有去实现的话，你单独一个G你get的时候，你去调的时候。



![](img/459b92cdac72d5ce9f943ca1509b66a8_98.png)

它也会根据你的需求去返回出来，就是根据你这个代码里边写的东西。

![](img/459b92cdac72d5ce9f943ca1509b66a8_100.png)

去给你返回出来啊，我先把它给注释一下，比如说你输出一个P1点OA，它会返回出来，小张30，但是我给他如果说付了值的话，你会发现，P1点owner，它变成了小红，这个小环线下线sat就报错了，他就报错了。

如果说你不实现这个的话，你是会有问题的啊，你是会有问题的，P点owner，P点小红杠杠，Dict，看一下它这个里边会有什么东西。



![](img/459b92cdac72d5ce9f943ca1509b66a8_102.png)

可以先把这个先给注释掉，咱们看一下P点里面有没有东西啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_104.png)

里面是没有东西的，但是我单纯给它赋个值。

![](img/459b92cdac72d5ce9f943ca1509b66a8_106.png)

它没有实现sat这个就是魔术方法。

![](img/459b92cdac72d5ce9f943ca1509b66a8_108.png)

它会报错的对吧，它会报错的，所以这一点你一定要注意，它的底层去如何去实现的呢，像就是就是考虑一下它的它为什么会这样，首先他这个类它是直接定义了类属性对吧，这个owner它是一个类属性。

你说他这个owner真的是改不了吗，咱们可以把这个P就是说phone点owner，比如PHONO点O呢改成小红，就跟以前咱们用这个这个这个那个，咱们从类的外部去改类属性，这种方式咱们可以看一下行不行。

它是没有问题的吧。

![](img/459b92cdac72d5ce9f943ca1509b66a8_110.png)

咱们可以print一下这个phone。

![](img/459b92cdac72d5ce9f943ca1509b66a8_112.png)

点DICTOR，你会发现它就变了。

![](img/459b92cdac72d5ce9f943ca1509b66a8_114.png)

但是如果说你不从类里面去改它，你从怎么又有这个你不从类里边去改它，你从他的这个实例化对象里面去修改它，它是改不了的，对不对，它是改不了的，所以这一点你要注意啊，他是怎么去实现的呢，其实他在找的时候在嗯。

比如说我PP一点缝，然后首先他会在P1点dict里面找P点，dict里面找它，P点dict里面是空的，它就会去类属性里面去找他。



![](img/459b92cdac72d5ce9f943ca1509b66a8_116.png)

去类属性里边去找类属性里边有什么呢。

![](img/459b92cdac72d5ce9f943ca1509b66a8_118.png)

print p一点class点dict。

![](img/459b92cdac72d5ce9f943ca1509b66a8_120.png)

它跟这个phone点DICTOR是一个意思啊，就是说P点它的类不就是phone是吧，它这里边你会发现这个owner它是一个，就是说object是一个person object，其实是一个类。

他就会去找类里边这个类，这个类里面的方法就是找这个git，或者找这个sat啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_122.png)

如果说能找到啊，它就会按照你的操作来操作啊，如果说找不到它其实就不是一个描述符对吧，只有你实现了git和sat，它才是一个描述符，如果你没实现，它其实和正常的是一样的，你只是一个呃。

就是说在它类里边去实现的一个，就是在它类内部去实例化了一个类，它和这个变量去复制没有任何的区别，只有说能找到这个git和sat。



![](img/459b92cdac72d5ce9f943ca1509b66a8_124.png)

它才能去做这样的，就是说去这个里边去找get和set it，然后去进行赋值，或者去进行获取它这么一个逻辑啊，一定要清楚它的底层，它为什么会这样，他为什么会这样，另外一个你看啊。

这个类写的是写在了类方法里边，如果说我给他写在了INIT，初始化这个方法里边儿啊，初始化这个方法里边儿，咱们再看看他写到了初始化里面，这个方法里边它会怎么样，因为前面加上这个self嘛。

这个时候我在实例化一个缝，我再把P1点啊，不改P点price啊，咱们改这个phone点，owner等于小红，咱们print一下，不是PHP一点，owner等于小红。

然后咱们print一下这个P点dict。

![](img/459b92cdac72d5ce9f943ca1509b66a8_126.png)

咱们可以看一下，也可以去调用一下这个P1点owner。

![](img/459b92cdac72d5ce9f943ca1509b66a8_128.png)

看看他能不能改。

![](img/459b92cdac72d5ce9f943ca1509b66a8_130.png)

你会发现它给改掉了，所以这个你只能是写在类方法里边，你不能是在就是杠杠，Init git，你前面加上self，它其实就变成了实例属性是吧。



![](img/459b92cdac72d5ce9f943ca1509b66a8_132.png)

实例属性他去找去，比如说他在复制之前，他去找去，就是p print一个P1点。

![](img/459b92cdac72d5ce9f943ca1509b66a8_134.png)

这个杠杠dict。

![](img/459b92cdac72d5ce9f943ca1509b66a8_136.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_137.png)

清空一下碰一下，如果它变成了实力的属性，他去找这个P点owner，他就是小红，他找着了，他直接就给改变掉了啊，他直接就给改变掉了，然后你看他改完之后，他后边就变成这样了，所以说他如果说是是实例属性的话。

是起不了作用的，只有当它是不是实力属性，就是它是类属性，只有当它是类属性的时候，你去改是改不了的，它会调用这个刚刚sit和刚刚G啊，它会调用这个刚刚sit和刚刚get，所以说这一点一定要请大家注意。

这就是描述符，你说它的适用场景，首先它肯定可以，比如说你的参数啊，比如说你一些不能改变的东西啊，你可以用它来进行一个设定对吧，但是它完全改不了吗，我可以直接改这个类属性吗，咱们刚才用的直接改这个PH。

第2ONER直接去改它啊，当然在有一些场合，可能在有些地方你需要怎么去写啊，这样能起到一个就是说这个数据，你在验证的时候会省去很多的麻烦，就比如咱们之前说的，你必须得输入一个是int类型。

那我在里边加以控制，你不能把这些都写在我这个类里边，我可以单独的给他写一个类进行控制，对吧啊，进行这样的数据验证，描述符咱们就讲到这。



![](img/459b92cdac72d5ce9f943ca1509b66a8_139.png)

后边咱们讲这个迭代器和生成器。

![](img/459b92cdac72d5ce9f943ca1509b66a8_141.png)

放在这，我把前面都全注释掉。

![](img/459b92cdac72d5ce9f943ca1509b66a8_143.png)

迭代器和这个迭代对象，咱们先了解一下，就是什么是可迭代对象，咱们之前说过可迭代对象，只要是可以被for loop，也就是for循环就是能够被他使用的，它就是可迭代对象，比如像list turbo是吧。

然后还有这个dict都是可以的，只要是能够使用for循环，包括range也是可以的，但是实际上是什么呢，for循环后边它必须得是一个可迭代对象，从字面上理解啊，这个迭代嘛其实就是一个一个给取出来。

或者说一个一个给拿出来，可以一次一次的更新迭代是吧，就是迭代嘛，可迭代对象其实实际上可迭代对象是什么呢，里边就是它的这个类里边，只要实现了这个eater或者说是GITEM呃，他就应该是可迭代对象。

但是可迭代对象里边一定是实现了ITER，或者这个get item是可迭代对象，它是一个你可以把它想成一个容器，这个里边放着可以一个一个被拿出来的东西啊，但是这个容器它不一定自己会有这个功能。

一个把它取出来，需要别人过来取，这就是可迭代对象，迭代器是什么呢，它主要讲究的是这个功能，就是我能够实现一个一个被取出来的，这样的一个方法，所以说迭代器，一定是什么呀，就是实现了这个下划线。

下划线next，方法的，但是其实实际上它也是必须得实现EER的啊，这个方法有next和这个eater的，它肯定是迭代器啊，有这个eater的，它是可迭代对象，好吧，平时咱们判定的时候用for loop。

其实这个是在检验它，但如果说你想在代码里边测试，它是不是一个可迭代对象，或者是一个迭代器，咱们可以怎么做呢，From collections，server collections啊。

点a b c import iterator和这个ITERABLE，IT呀，Iterable iterator，它是迭代器，ITERABLE是可迭代对象啊，比如说LST等于list里边写上123啊。



![](img/459b92cdac72d5ce9f943ca1509b66a8_145.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_146.png)

这个它就是一个可迭代对象，但是它不能实现这个next这个方法，所以说它不是一个迭代器，比如说咱们去验证一下啊。



![](img/459b92cdac72d5ce9f943ca1509b66a8_148.png)

print这个用这个is instance。

![](img/459b92cdac72d5ce9f943ca1509b66a8_150.png)

还是用这个方法，然后里边把这个LST放进去，然后chopper咱们先验证ITERABLE。

![](img/459b92cdac72d5ce9f943ca1509b66a8_152.png)

Is instance list list to expect，这个不能那么创建是吧，好这应该里面是应该是一个可迭代对象，可迭代对象，写一下吧，234好，这个时候咱们判定一下true，它是true。

它是一个可迭代对象，但是咱们print一下is instance，然后LT然后iterator i t iterator。



![](img/459b92cdac72d5ce9f943ca1509b66a8_154.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_155.png)

看看它是不是一个迭代器，你会发现它不是一个迭代器。

![](img/459b92cdac72d5ce9f943ca1509b66a8_157.png)

因为它用不了，比如说LST我要给它一个下划线。

![](img/459b92cdac72d5ce9f943ca1509b66a8_159.png)

下划线杠杠next啊，它是调用不了的，是它是它没有这个next方法，所以说你也不能直接使用，就是next next括号list，所以说如果想让它使用。



![](img/459b92cdac72d5ce9f943ca1509b66a8_161.png)

应该怎么怎么去操作呢，就是LST等于有一个内置方法叫EER。

![](img/459b92cdac72d5ce9f943ca1509b66a8_163.png)

然后把这个LST放进去就可以了。

![](img/459b92cdac72d5ce9f943ca1509b66a8_165.png)

这个时候他就可以去调用了，它就可以去调用了，list nest print一下，啊就是多来几个啊，它就会123，如果说你再多取几个，它会发生一个什么错误呢，咱们可以看一下啊，他会给你rise一个。

就是stop iteration这样的一个错误，所以说迭代器里边必须得有这个stop iteration，TRATIV这样的一个错误，这个就是迭代器和可迭代对象，咱们可以尝试自己去实现。



![](img/459b92cdac72d5ce9f943ca1509b66a8_167.png)

一个迭代器和一个可迭代对象，怎么实现呢，就比如说我就想这里边存点数是吧，我既不通过list，也不通过dict，当然咱们实现就用这种最笨的方法去实现，给大家演示一下啊，就比如说我定一个类class呃。

就是number，看好这个里边呢，我定义一个INIT，我这里边就存放三个数，cf点number，一等于100，小点number，二等于1000，cf点number，三等于1万，我就存放这三个数额。

然后我定义它的iterator，Itert2，这个方法。

![](img/459b92cdac72d5ce9f943ca1509b66a8_169.png)

一般定义的时候，你只要return一个self就可以了。

![](img/459b92cdac72d5ce9f943ca1509b66a8_171.png)

一个self把自己返回给他就可以了，然后再定一个next下划线，Self next，你得判定，就是说他当前因为他一个一个往外取嘛，他当前取的是哪个，所以说这定一个变量就是now number。



![](img/459b92cdac72d5ce9f943ca1509b66a8_173.png)

等于先给他一个NN值是吧。

![](img/459b92cdac72d5ce9f943ca1509b66a8_175.png)

如果if cf点N。

![](img/459b92cdac72d5ce9f943ca1509b66a8_177.png)

if not就是它等于浪值的话，If not self，那我就return一个。

![](img/459b92cdac72d5ce9f943ca1509b66a8_179.png)

我就把cf点number1给他返回去，aif snow number等于等于cf点SENFC点呃。

![](img/459b92cdac72d5ce9f943ca1509b66a8_181.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_182.png)

now就是number1啊，他已经取到第一个了，我就略称一个cf点number2啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_184.png)

我AC点number now number等于四点number two。

![](img/459b92cdac72d5ce9f943ca1509b66a8_186.png)

我就第一个C点number three，如果aif snow number等于等于四点number three，我就rise rise一个什么呢。



![](img/459b92cdac72d5ce9f943ca1509b66a8_188.png)

stop iteration tation这样的一个错误。

![](img/459b92cdac72d5ce9f943ca1509b66a8_190.png)

这个就是定义好的一个类，它实现了iterate和next这两个方法，那它肯定是一个可迭代对象，也是一个迭代器，这个时候咱们做一下判定。



![](img/459b92cdac72d5ce9f943ca1509b66a8_192.png)

我实例化它啊，number count等于啊number com。

![](img/459b92cdac72d5ce9f943ca1509b66a8_194.png)

![](img/459b92cdac72d5ce9f943ca1509b66a8_195.png)

这里边不用传参是吧，然后把之前的这两个C给他转过来好。

![](img/459b92cdac72d5ce9f943ca1509b66a8_197.png)

然后把这个list变成就是number count。

![](img/459b92cdac72d5ce9f943ca1509b66a8_199.png)

Number count，咱们可以看一下他是不是可迭代对象和迭代器，都是的是吧好。

![](img/459b92cdac72d5ce9f943ca1509b66a8_201.png)

这个时候呢我把next给注释掉，我没有实现next。

![](img/459b92cdac72d5ce9f943ca1509b66a8_203.png)

你会发现它是一个可迭代对象，但是它不是一个迭代器，但是如果说我把next给打开。

![](img/459b92cdac72d5ce9f943ca1509b66a8_205.png)

然后把iterator给注释掉，你会发现它两个都不是，两个都不是，所以说你要自己去创建一个迭代对象，或者迭代器的时候，你只创建一个可迭代对象，你可以就是只实现这个EER，但是你要创建一个迭代器的时候。

你一定要实现eater和next都需要实现的，咱们可以去运行一下这个程序对吧，好用next这个方法来调用number account，然后print一下，好给它复制。



![](img/459b92cdac72d5ce9f943ca1509b66a8_207.png)

三个复制，第四个他就应该去报错了，咱们运行一下。

![](img/459b92cdac72d5ce9f943ca1509b66a8_209.png)

一百一百，哦我没有给这个就是这个cf点number去赋值是吧，好cf点，他老是没有迭代完成，我就是self nn等于4。1啊，然后给它粘过去，这样在return之前，number2number3是吧。



![](img/459b92cdac72d5ce9f943ca1509b66a8_211.png)

这个时候咱们再看一下，它就会一百一千一万，然后会触发一个stop iteration这样的一个错误。

![](img/459b92cdac72d5ce9f943ca1509b66a8_213.png)

这个就是迭代器啊，这个就是迭代器。

![](img/459b92cdac72d5ce9f943ca1509b66a8_215.png)

然后咱们把它都给注释掉啊，迭代器说完，咱们该说生成器了。

![](img/459b92cdac72d5ce9f943ca1509b66a8_217.png)

为什么会从这儿讲生成器，因为生成器是一个特殊的迭代器，生成器并没有这个魔术方法，魔术方法基本上讲到这就讲完了，还有一些魔术方法基本上不会怎么用到，如果说碰到的话，你去查一下，你要知道魔术方法。

它其实就是类的一些操作，然后从外部实实现的操作，比如点啊，还是你去括号呀，它其实是通过调用内部，就是类内部的方法去完成的，好生成器，咱们讲生成器，生成器是个什么东西，咱们先给大家用一个代码演示一下。

比如说我定义一个number count c n吧，然后这个里边传入一个number，传入一个int，我写一个函数，这个里边函数来做什么呢，就是print啊，这个我print这个number。

然后写个while，number大于零。

![](img/459b92cdac72d5ce9f943ca1509b66a8_219.png)

我printing number，然后再number自检减等于一啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_221.png)

我正常执行这个函数就是number com，然后比如说我输入个十是吧，这个时候你就从这十987654321啊，这个就完成了是吧，如果生成器是个什么东西呢，它就是用一个ear的YIER。



![](img/459b92cdac72d5ce9f943ca1509b66a8_223.png)

DER的这个关键字，然后让这个函数它变成了一个生成器。

![](img/459b92cdac72d5ce9f943ca1509b66a8_225.png)

这个时候啊它就成了一个生成器，比如说我用镜过来接一下，这个时候他并不会去执行任何的东西，他不会去执行这个函数，当它这个里边有E的这个关键字的时候，其实就是告诉计算机底层，我是一个生成器。

他这个时候你用这个键过来接的时候，它就是实际上是创造了一个生成器，然后怎么去调用这个生成器呢，你用next进啊，Next gen，我把它多复制几遍，next g咱们可以看一下九和十什么意思。

就是我第一次调用next gen的时候，yield就是停止了，就是等于是摁下来一个暂停键啊，比如我十传进去了对吧，然后好，我next键它就开始运行，然后到year的这，然后他就停住了。

所以说第一个它是没有输出的，然后到第二个的时候，你又一个nest好，他接着往下走，从这往下走，然后print number就是十，然后自减就变成九了，但是他们没有输出啊，然后到这他又给停住了啊。

就是他这次一二的他输出了一个十对吧，然后但是它本身这个number经变成九了，然后你再调用一个这个键，他就又输出了一个九啊，然后又到E2的这来挺住了啊，为什么能用next去调用它呢。

因为生成器是一个特殊的迭代器，所以说就可以它内部肯定是实现了这个下划线，下划线next方法的，所以说你就可以用next来进行调用是吧，另外一个它既然是一个迭代器，那它应该是一个迭代对象。

所以说我for i in j，我是不是可以去便利它，我这里边我print一个I，咱们可以去看一下啊，你会发现它实施998877，为什么，因为从这又print了一次，然后从这又print了一次对吧。

它也是可以进行便利的啊，也是可以进行便利的，好这个就是生成器有什么作用呢，就比如说我在读取一个大的文件，如果说我整个给它全部给读进来的话，我我这个内存就占满了，所以说我完全可以分块的去给他去读对吧。

你就可以来使用这个就是每次在读在读的时候，我一二的我停一下，然后我执行一部分操作是吧，我读进来了，我执行一部分操作诶，我读完之后我再让它开始就这么来控制啊，这是它的一个使用场景。

它还有一个就是别的方法啊，就比如说我在调用的时候，我它可以往里边去传，这个就是数值的或者参数吧。

![](img/459b92cdac72d5ce9f943ca1509b66a8_227.png)

你next呢，它其实它的就是这个其实就是调用了一个点。

![](img/459b92cdac72d5ce9f943ca1509b66a8_229.png)

send给他，就给了他一个浪值啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_231.png)

就是他和这个next的这个实现是一样的，比如说我还是三个，就是就是你给了他一个NN值，你也可以给他传值，就是把参数给它传进去，比如说我中间我传一个15啊，这是十是吧，150吧，大一点，这样明显。

然后呢我用一个东西来接一下，就是temp来接一下啊，然后然后我接完之后，我判定一下temper，if temper is temper吧，它不是浪值，and temper大于零。

因为你不能让他陷入到死循环里边是吧。

![](img/459b92cdac72d5ce9f943ca1509b66a8_233.png)

就是这个number就等于temper，就是我就把这个number又复制成了这个temper啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_235.png)

我又把这个number又复制成了temper，这个时候咱们再来运行一下诶，你就会发现到第八个的时候，其实就是执行了三次嘛，然后他把150给他传进去了，他就变成150了，然后149就接着往下走。

这个是可以执行这个传值的，你还可以，它还有一个方法呢叫近点close，近点close。

![](img/459b92cdac72d5ce9f943ca1509b66a8_237.png)

就是给它关闭掉，这个后边你再去调用键。

![](img/459b92cdac72d5ce9f943ca1509b66a8_239.png)

点next也好，send也好啊，他就电波啊。

![](img/459b92cdac72d5ce9f943ca1509b66a8_241.png)

他就调用不了了啊，他就调不了了，进掉send，那咱们可以看一下啊，是吧，他就会报错了，就是已经停止了，Stop iteration，就是停止去这个迭代了，这个就是生成器，大家了解一下。



![](img/459b92cdac72d5ce9f943ca1509b66a8_243.png)

基本上咱们在量化里边呃，也用不太上。

![](img/459b92cdac72d5ce9f943ca1509b66a8_245.png)