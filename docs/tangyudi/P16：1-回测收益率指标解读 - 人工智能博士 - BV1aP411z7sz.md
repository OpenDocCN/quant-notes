# P16：1-回测收益率指标解读 - 人工智能博士 - BV1aP411z7sz

这节课咱们来说一下策略的评估指标啊，先说一下评估指标指的是什么东西啊，当我们做完了一个策略之后，那肯定要在历史数据当中进行一个测试吧，看咱们这个策略诶到底是赚了还是赔了，那赚了赔了，他并不是一个词儿。

你告诉我哎，比如说赚了多少呢，那相比于大盘来说，我们比大盘有什么样的一个优势呢，以及当我做了这样一个投资之后啊，或者说当我做了这样一个策略之后，我会遇到哪些个风险啊，我做这个风险是值得呢还是不值得呢。

以及诶我的策略跟别的策略相比，那有什么样的一个优势啊，这个就是我们要做的一个策略评估指标了，我建议大家看一下，就是后续啊咱们要用到的一个呃策略平台。



![](img/69109b1c435829d537b3198a5ddb0cba_1.png)

这里呢我先不介绍啊，这个平台干什么的，咱们先来简单的去了解一下我的一个结果，咱们讲这个策略评估指标主要是做这个分析的，你看这里诶，咱们就其他都不管啊，就是看到节奏就行了。

你看这点是不是说当我们做了某一个策略，你不用心去管，是做什么东西，等后面课程当中我会详细给大家解释啊，当前哎我们这个平台他做了一件什么事，以及呢我们要做什么样策略，怎么样实验，我们现在只需要关注啊。

就是有哪几个指标，你看这里这些指标是我们最常说的，然后一会儿呢我会在咱这个notebook当中，也给大家去讲这些基本的评估指标啊，他们都是什么意思，以及呢我们的计算公式是什么，主要啊。

就是大家可能看这个计算公式看起来挺长的，挺闹心的，没关系啊，最好是去通俗的理解就可以了，我建议大家就是对这些指标啊，一说你就知道大家什么意思就行了，不用把公式背下来啊。

公式我只给大家简单的描述一下什么意思，主要呢，咱还是得知道这些纸面表达是什么东西啊，其实说白了就是为了让大家能看懂什么，看懂就是咱的一个分析结构当中，呈现出来的各个指标诶。



![](img/69109b1c435829d537b3198a5ddb0cba_3.png)

它都是什么样的一个意思啊，行了，我们来看一下吧，这里有哪几个指标。

![](img/69109b1c435829d537b3198a5ddb0cba_5.png)

先说第一个吧，叫做一个回撤的收益率，一个一个来吧。

![](img/69109b1c435829d537b3198a5ddb0cba_7.png)

咱一个去说啊，一会儿呢我会在下面，就是咱编写代码边给大家去讲啊，每一个策略，然后他都是做了一件什么事，第一步，这样咱们还是先把这个工具包给导进来啊。



![](img/69109b1c435829d537b3198a5ddb0cba_9.png)

工具包导进来这块呢加上了一些字体啊，主要是方便咱们去写我们的一个中文的数据啊，咱们一会儿可能要画图，第一步还是先把这个数据给读进来啊，然后呢一会儿啊咱们继续啊，我们现在的一个本地数据来做一下。

我们这个策略先不用，咱们该给大家说这个平台啊，将Python当中给大家捋一捋都是什么意思，等后续呢咱就不自己算了，全是据这个平台，它自动网帮我们设置出来的多项数据，然后我说指定一个index啊。

就是一个日期是第零个就可以了哦，然后指定的数据名字叫做一个beta，然后呢看一下咱们的数据啊。

![](img/69109b1c435829d537b3198a5ddb0cba_11.png)

长什么样子行了，这就是我们这个数据啊，然后反正就是有一股票有一个指标啊，在这些指标当中去看它发生些变化，然后呢当它发生变化的时候。



![](img/69109b1c435829d537b3198a5ddb0cba_13.png)

我不是想看吗，就是你的上面你不是跟我说了这么多指标吗。

![](img/69109b1c435829d537b3198a5ddb0cba_15.png)

再来看一看这些指标啊，该怎么样去算啊。

![](img/69109b1c435829d537b3198a5ddb0cba_17.png)

这是给大家提供的一个样例数据，然后呢我们就一个去说吧，啊，先说最重要的一个。

![](img/69109b1c435829d537b3198a5ddb0cba_19.png)

也是最基本的一个叫做回测的收益率，你看这里这块什么，第一个指标就是回测的一个收益吧，灰色收益啊，它是这样一件事儿，就是呃当你做了一个策略之后，那你肯定也要最终知道你的策略。

比如说你说选这个从15年到20年的，一个某个股票，每股某个股票的数据，然后你选了一个策略，然后什么时候买收入卖，然后得到一个结果，这个结果就是唉最终你赚了多少钱啊，但是注意点它是什么。

它不是一个钱多少吧，是相对啊，你一开始有的一个本金啊，你赚了多少，你看这点，比如说它是一个4%点多啊，你就大概知道了，哎呀我折腾多年，我大概值得，我这个赚的钱相对我的本金来说多了多少啊。

大概这样一件事行。

![](img/69109b1c435829d537b3198a5ddb0cba_21.png)

然后给大家看一下吧，就是我们的一个计算公式，计算公式啊，非常简单，回测收益率，你看这里有一个啊PT，大体的意思就是说咱们现在的一个卖出价格啊，就相当于一开始啊你是有笔钱啊，然后有笔有笔钱之后。

你去买了一些股票，这是你开始笔钱买了股票，然后呢后来各路段时间给卖出去了，我们现在就是分子当中，是不是相当于是你赚了多少钱啊，但是注意点赚了多少钱是相对谁来说的，是相对啊，一开始你有多少钱啊。

咱们来说的算了个什么回撤的一个收益率吧。

![](img/69109b1c435829d537b3198a5ddb0cba_23.png)

回撤收益率啊是咱们呃在这个计算策略吧。

![](img/69109b1c435829d537b3198a5ddb0cba_25.png)

或者说做评估的时候，我们最常用的一个指标了，主要就表示着我们当前哎呀，这件事做的怎么样吧，啊这是我们的一个回撤收益率，然后呢给大家来看一下吧，就是咱们这个回撤收益率啊，该怎么样去做这样一个计算。

其实这样啊，我们一块儿画图，您可以画一个图啊，比如这样，现在我们是呃从这个比如说比如说啊15年的，16年的，17年的，18年的，你可以看一下，就是随着时间的一个变化，你的一个回撤收益率。

它的一个变化情况吧，我们是可以求这样一个变化情况吧，那怎么求这个事儿呢，那是不是说啊，你用每一个时间点它的一个pk值啊，比上什么，比上最开始他的一个值就可以了啊，来看一下吧，当前我们的一个做法好了。

这里我说这样，我说现在我构建一个this frame，frame当中都是一些哦我的一个比值数据啊，就可以了，这里啊就是我们先不做这样一个减法，因为我们可以这样，你看这个东西我们是不是可以这一块做什么。

这块做的除法，后面减什么，减去一个一，是不是一样的啊，咱一会直接减一就行了，我不做那么复杂，最后简易相当于把这个公式给它做了一个化简，来写一下吧，那你说第一步要算什么。

是不是你算一下这两个数据它的一个比值啊，怎么算，那我说构建一个data frame吧，好了，先构建一个data frame，在这个data frame当中啊，是不是说对于每一个时间点我的一个结果。

你看这是一个结果吧，要比上什么最开始我的一个情况吧，好了，最开始的情况，那就是我什么第一个数据就可以了吧，好了，对this rame当中我说点IOC一下LC当中啊，传谁啊，第一个数据是谁，索引为零的吧。

这样我构建完之后，咱们现在得到什么，就是我当前的第一个事儿，这我就做完了吧，好了，咱们现在把这个第一件事做完了，然后呢我给大家画个图给看一下，但当前这个结果对他我说我去做一个pa。

然后指定一个pk size等于的稍微大一点。

![](img/69109b1c435829d537b3198a5ddb0cba_27.png)

来看这个图，这是什么，这就是相对一开始啊，一开始是一的情况下，我相对一开始比如一开始是一块钱，我现在把这一块钱变得怎么样了。



![](img/69109b1c435829d537b3198a5ddb0cba_29.png)

唉通过我这样一个策略是吧行了，那然后咱还没算完，我们算什么一个回撤的收益率吧，好了，那我说我最终啊咱的一个回测收益率。



![](img/69109b1c435829d537b3198a5ddb0cba_31.png)

然后一个return值等于什么呢，等于在我的DAF当中去干什么。

![](img/69109b1c435829d537b3198a5ddb0cba_33.png)

对于我的每一个哎，咱们算最终的一回合收益率啊，最终回的收益率，那就是最后一个值吧，那不要忘记还要减什么。



![](img/69109b1c435829d537b3198a5ddb0cba_35.png)

公式当中告诉我们最后还要减谁，减去一个一是不是就可以了啊。

![](img/69109b1c435829d537b3198a5ddb0cba_37.png)

然后呢把这个东西我说做成了表格吧，再展示起来看着好看一点，现在我说我构造一个data frame，在我当前DEFRAME当中啊，把我的一个结果给传进去，然后用它的一个点V6，这是我的一个数值啊。

然后指定完数值之后，我说指定一个列名吧，呃我的店名我自己叫做一个名字，叫做一个回测收益率就行，好叫做一个回测收益率行了，然后指定我的一个索引啊，指定的索引，然后就拿原始原来索引就可以。



![](img/69109b1c435829d537b3198a5ddb0cba_39.png)

第二你DEX也行，我们来执行一下呃，看一下遇到小问题。

![](img/69109b1c435829d537b3198a5ddb0cba_41.png)

这个一没有在我的一个索引当中哦，哦day frame当中我得去点IOC一下。

![](img/69109b1c435829d537b3198a5ddb0cba_43.png)

然后再执行一下，这样我们是不是就把这个回撤收益率唉，给算出来了，相当于哎呀我跟一开始相比，我现在是赚了多少啊，通常通常赔的可能性也有啊。



![](img/69109b1c435829d537b3198a5ddb0cba_45.png)

因为你看这里就是其实这里我们是没，你就假装是吧，就这个数据就是我们做了一个回测之后，咱得到的结果，其实这个东西啊它就是正常的一个走势，我们没有做东西，只独见了你就当做是我做了一些策略之后。

哎我得到了每一天他的一个收盘价啊。

![](img/69109b1c435829d537b3198a5ddb0cba_47.png)